{"ast":null,"code":"import _objectSpread from\"/home/katni/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/katni/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/katni/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/katni/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/katni/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import'../../App.css';var FinishOrderData=/*#__PURE__*/function(_React$Component){_inherits(FinishOrderData,_React$Component);var _super=_createSuper(FinishOrderData);function FinishOrderData(props){var _this;_classCallCheck(this,FinishOrderData);_this=_super.call(this,props);_this.abortController=new AbortController();_this.getProfileInfo=function(){fetch('/profileroutes',{signal:_this.abortController.signal,method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json'},body:JSON.stringify({requestType:1})}).then(function(res){return res.json();}).then(function(res){return _this.setState({profileInfo:res[0],shippingAddress:{firstName:res[0].first_name,lastName:res[0].last_name,street:res[0].street_ship,postNumber:res[0].post_number_ship,town:res[0].town_ship}});}).catch(function(e){return console.error(\"Critical failure: \"+e.message);});};_this.changeAddress=function(e){var shippingAddress=_objectSpread({},_this.state.shippingAddress);var _e$target=e.target,name=_e$target.name,value=_e$target.value;shippingAddress[name]=value;_this.setState({shippingAddress:shippingAddress});};_this.onEditButtonClick=function(e){if(e.target.id==='info'){_this.setState({editInfo:true});}if(e.target.id==='cancel'){_this.setState({editInfo:false});}};_this.updateInfo=function(e){e.preventDefault();_this.props.callbackParent(_this.state.shippingAddress);_this.setState({editInfo:false});};_this.switchRender=function(){if(_this.state.userId==='0'){return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:'rgb(255,255,255,0.5)'}},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h2\",null,\"PROSIMO PRIJAVITE SE V SISTEM!\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null));}else if(!_this.state.profileInfo){return/*#__PURE__*/React.createElement(\"div\",null);}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"finishorderdata\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"b\",null,\"DOSTAVA: \"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\"Po\\u0161ta Slovenije, navadna po\\u0161iljka\"),!_this.state.editInfo&&/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"b\",null,\"DOSTAVA NA NASLOV:\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),_this.state.shippingAddress.firstName+' '+_this.state.shippingAddress.lastName,/*#__PURE__*/React.createElement(\"br\",null),_this.state.shippingAddress.street+', '+_this.state.shippingAddress.postNumber+' '+_this.state.shippingAddress.town,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"b\",null,\"NA\\u010CIN PLA\\u010CILA: \"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\"Pla\\u010Dilna kartica (VISA, MASTERCARD)\"));}};_this.state={userId:'0',profileInfo:null,shippingAddress:null,editInfo:false,visible:false};return _this;}_createClass(FinishOrderData,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('/sessionroutes',{signal:this.abortController.signal}).then(function(res){return res.json();}).then(function(res){_this2.setState({userId:res.userId});if(res.userId!=='0')_this2.getProfileInfo();}).catch(function(e){return console.error(\"Critical failure: \"+e.message);});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.abortController.abort();}},{key:\"render\",value:function render(){return this.switchRender();}}]);return FinishOrderData;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{loggedInUser:state.loggedInUser,loggedInUserId:state.loggedInUserId};};export default connect(mapStateToProps)(FinishOrderData);","map":{"version":3,"sources":["/home/katni/APP/client/src/pages/ShoppingCart/FinishOrderData.jsx"],"names":["React","connect","FinishOrderData","props","abortController","AbortController","getProfileInfo","fetch","signal","method","headers","body","JSON","stringify","requestType","then","res","json","setState","profileInfo","shippingAddress","firstName","first_name","lastName","last_name","street","street_ship","postNumber","post_number_ship","town","town_ship","catch","e","console","error","message","changeAddress","state","target","name","value","onEditButtonClick","id","editInfo","updateInfo","preventDefault","callbackParent","switchRender","userId","backgroundColor","visible","abort","Component","mapStateToProps","loggedInUser","loggedInUserId"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport '../../App.css';\n\n\nclass FinishOrderData extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            userId: '0',\n            profileInfo: null,\n            shippingAddress: null,\n            editInfo: false,\n            visible: false\n        };\n    }\n\n    abortController = new AbortController();\n\tcomponentDidMount() {\n\n        fetch('/sessionroutes', {signal: this.abortController.signal})\n        .then(res => res.json())\n        .then(res => {this.setState({userId: res.userId}); if(res.userId !== '0') this.getProfileInfo();})\n        .catch(e => console.error(\"Critical failure: \" + e.message));\n\n    }\n\n    getProfileInfo = () => {\n        fetch('/profileroutes', {\n            signal: this.abortController.signal,\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            },\n            body: JSON.stringify({\n                requestType: 1\n            })\n        })\n        .then(res => res.json())\n        .then(res => this.setState({profileInfo: res[0],\n            shippingAddress: {\n                firstName: res[0].first_name,\n                lastName: res[0].last_name,\n                street: res[0].street_ship,\n                postNumber: res[0].post_number_ship,\n                town: res[0].town_ship\n            }\n        }))\n        .catch(e => console.error(\"Critical failure: \" + e.message));   \n    }\n\n    componentWillUnmount() {\n        this.abortController.abort();\n    }\n\n    changeAddress = (e) => { \n        var shippingAddress = {...this.state.shippingAddress}\n        const { name, value } = e.target;\n        shippingAddress[name] = value;\n        this.setState({shippingAddress});\n    }\n\n    onEditButtonClick = (e) => {\n        if(e.target.id === 'info') {\n            this.setState({editInfo: true});\n        }\n        if(e.target.id === 'cancel') {\n            this.setState({editInfo: false});\n        }\n    }\n\n    updateInfo = (e) => {\n        e.preventDefault();\n        this.props.callbackParent(this.state.shippingAddress);\n        this.setState({editInfo: false});\n    }\n\n    switchRender = () => {\n        if(this.state.userId === '0') {\n            return (\n                <div style = {{backgroundColor: 'rgb(255,255,255,0.5)'}}>\n                    <br/><br/><br/>\n                    <h2>PROSIMO PRIJAVITE SE V SISTEM!</h2>\n                    <br/><br/><br/>\n                </div>\n            )\n        }\n        else if(!this.state.profileInfo) {\n            return (<div></div>)\n        } else {\n            return (\n                    <div className = 'finishorderdata'>\n                        <br/>\n                        <b>DOSTAVA: </b><br/>\n                        <p>Pošta Slovenije, navadna pošiljka</p>\n                        {!this.state.editInfo && <p><b>DOSTAVA NA NASLOV:</b>\n                                                    <br/>\n                                                    <br/>\n                                                    {this.state.shippingAddress.firstName + ' ' + this.state.shippingAddress.lastName}\n                                                    <br/>\n                                                    {this.state.shippingAddress.street + ', ' + this.state.shippingAddress.postNumber + ' ' + this.state.shippingAddress.town}\n                                                    <br/>\n                                                    <br/>\n                                                    {/* <button id = 'info' className = 'btnu' onClick = {this.onEditButtonClick}>DOSTAVA NA DRUG NASLOV</button> */}\n                                                    </p>}\n                        {/* {this.state.editInfo && <div><form onSubmit = {this.updateInfo}>\n                                                        <b>NASLOV ZA DOSTAVO NAROČILA: </b><br/>\n                                                        <input type='text' id='firstName' name='firstName' placeholder='Ime' value={this.state.shippingAddress.firstName} style = {{width: '200px'}} maxLength=\"30\" onChange={this.changeAddress}/>\n                                                        <input type='text' id='lastName' name='lastName' placeholder='Priimek' value={this.state.shippingAddress.lastName} style = {{width: '200px'}} maxLength=\"30\" onChange={this.changeAddress}/>\n                                                        <input type='text' id='street' name='street' placeholder='Ulica in hišna številka' value={this.state.shippingAddress.street} style = {{width: '200px'}} maxLength=\"30\" onChange={this.changeAddress}/>\n                                                        <input type='text' id='postnumber' name='postNumber' placeholder='Poštna številka' value={this.state.shippingAddress.postNumber} style = {{width: '100px'}} maxLength=\"10\" onChange={this.changeAddress}/>\n                                                        <input type='text' id='town' name='town' placeholder='Kraj' value={this.state.shippingAddress.town} style = {{width: '150px'}} maxLength=\"30\" onChange={this.changeAddress}/>\n                                                        <br/>\n                                                        <button className = 'btnb' type = 'submit'>SHRANI</button>\n                                                        <button className = 'btnb' style = {{marginLeft: '5px'}} onClick = {this.onEditButtonClick}>PREKLIČI</button>\n                                                        </form></div>} */}\n                        <br/>\n                        <b>NAČIN PLAČILA: </b><br/>\n                        <p>Plačilna kartica (VISA, MASTERCARD)</p>\n\n                    </div>\n            )\n        }\n    }\n\n    render() {\n        return this.switchRender();\n    }\n\n}\n\nconst mapStateToProps = state => {\n    return {\n      loggedInUser: state.loggedInUser,\n      loggedInUserId: state.loggedInUserId\n    };\n  };\n\n\nexport default connect(mapStateToProps) (FinishOrderData);"]},"metadata":{},"sourceType":"module"}