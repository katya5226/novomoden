{"ast":null,"code":"var _jsxFileName = \"/home/katja/REACT/test-app/src/pages/ShoppingCart/PaymentStatus.jsx\";\nimport React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { logIn, logOut } from '../../redux/actions';\nimport UpperLine from '../../components/UpperLine';\nimport Header from '../../components/Header';\nimport Bottom from '../../components/Bottom';\nimport BreadCrumbs from '../../components/BreadCrumbs';\nimport NavBar from '../../components/NavBar';\nimport AdSpace from '../../components/AdSpace';\nimport ClipLoader from 'react-spinners/ClipLoader';\n\nclass PaymentStatus extends React.Component {\n  constructor(props) {\n    super(props);\n    this.abortController = new AbortController();\n\n    this.checkPayment = () => {\n      function subStrAfterChars(str, char) {\n        return str.substring(str.indexOf(char) + 1);\n      }\n\n      const eventId = subStrAfterChars(window.location.href, '=');\n      fetch('/paymentstatus', {\n        signal: this.abortController.signal,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          eventId: eventId\n        })\n      }).then(res => res.json()).then(res => console.log(res)).catch(e => console.error(\"Critical failure: \" + e.message));\n    };\n\n    this.switchRender = () => {\n      if (this.state.success) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            backgroundColor: 'rgb(255,255,255,0.7)',\n            margin: '0 auto'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 20\n          }\n        }, /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(\"h1\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }\n        }, \"PLA\\u010CILO JE SPREJETO! NARO\\u010CILO ZAKLJU\\u010CENO! \\u0160TEVILKA NARO\\u010CILA: \", this.state.eventId), /*#__PURE__*/React.createElement(NavLink, {\n          exact: true,\n          to: \"/\",\n          className: \"btnb\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }\n        }, \"DOMOV\"), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }\n        }));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            backgroundColor: 'rgb(255,255,255,0.7)',\n            margin: '0 auto'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 20\n          }\n        }, /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(\"h1\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }\n        }, \"OJEJ, NEKAJ JE \\u0160LO NAROBE, PLA\\u010CILO NI USPELO.\"), /*#__PURE__*/React.createElement(NavLink, {\n          exact: true,\n          to: \"/\",\n          className: \"btnb\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }\n        }, \"DOMOV\"), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }\n        }));\n      }\n    };\n\n    this.state = {\n      success: false,\n      eventId: ''\n    };\n  }\n\n  componentDidMount() {\n    this.checkPayment();\n    this.interval = setInterval(() => {\n      this.checkPayment();\n    }, 3000);\n  }\n\n  //{if (res.success) {this.setState({success: true, eventId: eventId})}}\n  componentWillUnmount() {\n    this.abortController.abort();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(UpperLine, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(NavBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(BreadCrumbs, {\n      pathname: this.props.location.pathname,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }), this.switchRender(), /*#__PURE__*/React.createElement(AdSpace, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Bottom, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    loggedInUser: state.loggedInUser,\n    loggedInUserId: state.loggedInUserId\n  };\n};\n\nconst mapDispatchToProps = {\n  logIn: logIn,\n  logOut: logOut\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(PaymentStatus);","map":{"version":3,"sources":["/home/katja/REACT/test-app/src/pages/ShoppingCart/PaymentStatus.jsx"],"names":["React","NavLink","connect","logIn","logOut","UpperLine","Header","Bottom","BreadCrumbs","NavBar","AdSpace","ClipLoader","PaymentStatus","Component","constructor","props","abortController","AbortController","checkPayment","subStrAfterChars","str","char","substring","indexOf","eventId","window","location","href","fetch","signal","method","headers","body","JSON","stringify","then","res","json","console","log","catch","e","error","message","switchRender","state","success","backgroundColor","margin","componentDidMount","interval","setInterval","componentWillUnmount","abort","render","pathname","mapStateToProps","loggedInUser","loggedInUserId","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { logIn, logOut } from '../../redux/actions';\nimport UpperLine from '../../components/UpperLine';\nimport Header from '../../components/Header';\nimport Bottom from '../../components/Bottom';\nimport BreadCrumbs from '../../components/BreadCrumbs';\nimport NavBar from '../../components/NavBar';\nimport AdSpace from '../../components/AdSpace';\nimport ClipLoader from 'react-spinners/ClipLoader';\n\n\nclass PaymentStatus extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            success: false,\n            eventId: ''\n        };\n    }\n\n    abortController = new AbortController();\n\n    componentDidMount() {\n\n        this.checkPayment();\n        this.interval = setInterval(() => {this.checkPayment();}, 3000);\n\n    }\n\n    checkPayment = () => {\n        function subStrAfterChars(str, char) {\n            return str.substring(str.indexOf(char) + 1);\n        }\n        const eventId = subStrAfterChars(window.location.href, '=');\n        fetch('/paymentstatus', {\n            signal: this.abortController.signal,\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            },\n            body: JSON.stringify({\n                eventId: eventId\n            })\n        }).then(res => res.json())\n        .then(res => console.log(res))\n        .catch(e => console.error(\"Critical failure: \" + e.message));\n    }\n\n    //{if (res.success) {this.setState({success: true, eventId: eventId})}}\n\n    componentWillUnmount() {\n        this.abortController.abort();\n    }\n\n    switchRender = () => {\n\n        if (this.state.success) {\n            return <div style = {{backgroundColor: 'rgb(255,255,255,0.7)', margin:'0 auto'}}>\n                        <br/>\n                        <h1>PLAČILO JE SPREJETO! NAROČILO ZAKLJUČENO! ŠTEVILKA NAROČILA: {this.state.eventId}</h1>\n                        <NavLink exact to = '/' className = 'btnb'>DOMOV</NavLink>\n                        <br/>\n                    </div>\n        } else {\n            return <div style = {{backgroundColor: 'rgb(255,255,255,0.7)', margin:'0 auto'}}>\n                        <br/>\n                        <h1>OJEJ, NEKAJ JE ŠLO NAROBE, PLAČILO NI USPELO.</h1>\n                        <NavLink exact to = '/' className = 'btnb'>DOMOV</NavLink>\n                        <br/>\n                    </div>\n        }\n    }\n\n    render() {\n        return <div className=\"App\">\n                    <UpperLine/>\n                    <Header/>\n                    <NavBar/>\n                    <BreadCrumbs pathname = {this.props.location.pathname}/>\n                    {this.switchRender()}\n                    <AdSpace/>\n                    <Bottom/>\n                </div>\n  \n    }\n    \n}\n\nconst mapStateToProps = state => {\n    return {\n      loggedInUser: state.loggedInUser,\n      loggedInUserId: state.loggedInUserId\n    };\n  };\n  \n  const mapDispatchToProps = {\n    logIn: logIn,\n    logOut: logOut\n  };\n\nexport default connect(mapStateToProps, mapDispatchToProps) (PaymentStatus);\n"]},"metadata":{},"sourceType":"module"}