{"ast":null,"code":"var _jsxFileName = \"/home/katja/REACT/test-app/src/pages/UserPage/UserListings.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { logIn, logOut } from '../../redux/actions';\nimport Popup from 'reactjs-popup';\nimport '../../App.css';\n\nclass UserListings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.abortController = new AbortController();\n\n    this.handleDeleteRequest = id => {\n      this.setState({\n        tryingToDelete: id\n      });\n    };\n\n    this.handleDelete = id => {\n      fetch('/deleteListing', {\n        signal: this.abortController.signal,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          adId: id\n        })\n      }).then(res => res.json()).then(res => res.success && this.setState({\n        tryingToDelete: -1\n      })).then(() => this.displayPhotos(this.props.loggedInUserId)).catch(e => console.error(\"Critical failure: \" + e.message));\n    };\n\n    this.cancelDelete = () => {\n      this.setState({\n        tryingToDelete: -1\n      });\n    };\n\n    this.state = {\n      urls: [],\n      listings: [],\n      tryingToDelete: -1\n    };\n    this.displayPhotos = this.displayPhotos.bind(this);\n  }\n\n  componentDidMount() {\n    fetch('/sessionroutes', {\n      signal: this.abortController.signal\n    }).then(res => res.json()).then(res => this.displayPhotos(res.userId)).catch(e => console.error(\"Critical failure: \" + e.message));\n  }\n\n  componentWillUnmount() {\n    this.abortController.abort();\n  }\n\n  displayPhotos(uid) {\n    console.log('displayPhotos called');\n    console.log(uid);\n    fetch('/photos', {\n      signal: this.abortController.signal,\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify({\n        userId: uid\n      })\n    }).then(res => res.json()).then(listings => {\n      if (!listings.length) {\n        this.setState({\n          listings: []\n        });\n      } else {\n        this.setState({\n          listings\n        });\n      }\n\n      ;\n    }).catch(e => console.error(\"Critical failure: \" + e.message));\n  }\n\n  render() {\n    const imgStyle = {\n      height: \"290px\",\n      verticalAlign: \"middle\",\n      marginRight: \"20px\",\n      border: '2px solid rgb(255, 255, 255, 0.5)'\n    };\n    const textStyle = {\n      color: 'black',\n      textDecoration: 'underline',\n      fontWeight: '500'\n    };\n\n    if (!this.state.listings.length) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"userListings\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        style: {\n          color: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }, \"NIMATE \\u0160E OBJAVLJENIH OGLASOV.\")), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          verticalAlign: 'top',\n          textAlign: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        exact: true,\n        to: \"/upload\",\n        style: {\n          textDecoration: \"none\",\n          color: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 51\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 127\n        }\n      }, \"+ OBJAVI NOV OGLAS\")))));\n    } else if (this.state.listings.length && this.state.tryingToDelete !== -1) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"userListings\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Popup, {\n        open: true,\n        position: \"center center\",\n        onClose: this.closeModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: 'inline',\n          justifyContent: 'space-around'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          margin: 'auto 10px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }\n      }, \"Ste prepri\\u010Dani, da \\u017Eelite izbrisati oglas?\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btnb\",\n        onClick: () => this.handleDelete(this.state.tryingToDelete),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }\n      }, \"DA\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btnb\",\n        onClick: this.cancelDelete,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }\n      }, \"NE\"))), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          verticalAlign: 'top',\n          textAlign: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        exact: true,\n        to: \"/upload\",\n        style: {\n          textDecoration: \"none\",\n          color: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 51\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 127\n        }\n      }, \"+ OBJAVI NOV OGLAS\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"listingWrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }\n      }, this.state.listings.map(listing => /*#__PURE__*/React.createElement(\"li\", {\n        key: listing.ad_id,\n        style: {\n          listStyleType: \"none\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: listing.photo1_url,\n        alt: listing.photo1_url,\n        style: imgStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 33\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          verticalAlign: \"middle\",\n          display: \"inline-block\",\n          height: \"100%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 106\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: '60%',\n          height: '80%',\n          float: 'right',\n          padding: '20px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 37\n        }\n      }, \"\\u0160tevilka oglasa: \", /*#__PURE__*/React.createElement(NavLink, {\n        to: \"/item?\" + listing.ad_id,\n        style: textStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 57\n        }\n      }, listing.ad_id)), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        to: \"/edit?\" + listing.ad_id,\n        style: textStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 40\n        }\n      }, \"  UREJANJE\")), /*#__PURE__*/React.createElement(\"button\", {\n        style: {\n          backgroundColor: 'rgb(255,255,255,0)',\n          border: 'none',\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 37\n        }\n      }, \"X IZBRI\\u0160I\"))))));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"userListings\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          verticalAlign: 'top',\n          textAlign: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        exact: true,\n        to: \"/upload\",\n        style: {\n          textDecoration: \"none\",\n          color: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 51\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 127\n        }\n      }, \"+ OBJAVI NOV OGLAS\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"listingWrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }\n      }, this.state.listings.map(listing => /*#__PURE__*/React.createElement(\"li\", {\n        key: listing.ad_id,\n        style: {\n          listStyleType: \"none\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: listing.photo1_url,\n        alt: listing.photo1_url,\n        style: imgStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 33\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          verticalAlign: \"middle\",\n          display: \"inline-block\",\n          height: \"100%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 106\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: '60%',\n          height: '80%',\n          float: 'right',\n          padding: '20px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 37\n        }\n      }, \"\\u0160tevilka oglasa: \", /*#__PURE__*/React.createElement(NavLink, {\n        to: \"/item?\" + listing.ad_id,\n        style: textStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 57\n        }\n      }, listing.ad_id)), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        to: \"/edit?\" + listing.ad_id,\n        style: textStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 40\n        }\n      }, \"  UREJANJE\")), /*#__PURE__*/React.createElement(\"button\", {\n        style: {\n          backgroundColor: 'rgb(255,255,255,0)',\n          border: 'none',\n          cursor: 'pointer'\n        },\n        onClick: () => this.handleDeleteRequest(listing.ad_id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 37\n        }\n      }, \"X IZBRI\\u0160I\"))))));\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    loggedInUser: state.loggedInUser,\n    loggedInUserId: state.loggedInUserId\n  };\n};\n\nexport default connect(mapStateToProps)(UserListings);","map":{"version":3,"sources":["/home/katja/REACT/test-app/src/pages/UserPage/UserListings.jsx"],"names":["React","connect","NavLink","logIn","logOut","Popup","UserListings","Component","constructor","props","abortController","AbortController","handleDeleteRequest","id","setState","tryingToDelete","handleDelete","fetch","signal","method","headers","body","JSON","stringify","adId","then","res","json","success","displayPhotos","loggedInUserId","catch","e","console","error","message","cancelDelete","state","urls","listings","bind","componentDidMount","userId","componentWillUnmount","abort","uid","log","length","render","imgStyle","height","verticalAlign","marginRight","border","textStyle","color","textDecoration","fontWeight","textAlign","width","closeModal","display","justifyContent","margin","map","listing","ad_id","listStyleType","photo1_url","float","padding","backgroundColor","cursor","mapStateToProps","loggedInUser"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,qBAA9B;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAO,eAAP;;AAGA,MAAMC,YAAN,SAA2BN,KAAK,CAACO,SAAjC,CAA2C;AAE1CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;AADkB,SAYhBC,eAZgB,GAYE,IAAIC,eAAJ,EAZF;;AAAA,SA6ChBC,mBA7CgB,GA6COC,EAAD,IAAQ;AAC1B,WAAKC,QAAL,CAAc;AAACC,QAAAA,cAAc,EAAEF;AAAjB,OAAd;AACH,KA/Ce;;AAAA,SAiDhBG,YAjDgB,GAiDAH,EAAD,IAAQ;AAEnBI,MAAAA,KAAK,CAAC,gBAAD,EAAmB;AACpBC,QAAAA,MAAM,EAAE,KAAKR,eAAL,CAAqBQ,MADT;AAEpBC,QAAAA,MAAM,EAAE,MAFY;AAGpBC,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAEL,oBAAU;AAFL,SAHW;AAOpBC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACC,UAAAA,IAAI,EAAEX;AAAP,SAAf;AAPc,OAAnB,CAAL,CAQGY,IARH,CAQQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARf,EASCF,IATD,CASMC,GAAG,IAAIA,GAAG,CAACE,OAAJ,IAAe,KAAKd,QAAL,CAAc;AAACC,QAAAA,cAAc,EAAE,CAAC;AAAlB,OAAd,CAT5B,EAUCU,IAVD,CAUM,MAAM,KAAKI,aAAL,CAAmB,KAAKpB,KAAL,CAAWqB,cAA9B,CAVZ,EAWCC,KAXD,CAWOC,CAAC,IAAIC,OAAO,CAACC,KAAR,CAAc,uBAAuBF,CAAC,CAACG,OAAvC,CAXZ;AAaH,KAhEe;;AAAA,SAkEhBC,YAlEgB,GAkED,MAAM;AACjB,WAAKtB,QAAL,CAAc;AAACC,QAAAA,cAAc,EAAE,CAAC;AAAlB,OAAd;AACH,KApEe;;AAElB,SAAKsB,KAAL,GAAa;AACHC,MAAAA,IAAI,EAAE,EADH;AAEHC,MAAAA,QAAQ,EAAE,EAFP;AAGHxB,MAAAA,cAAc,EAAE,CAAC;AAHd,KAAb;AAMM,SAAKc,aAAL,GAAqB,KAAKA,aAAL,CAAmBW,IAAnB,CAAwB,IAAxB,CAArB;AAEH;;AAGJC,EAAAA,iBAAiB,GAAG;AACTxB,IAAAA,KAAK,CAAC,gBAAD,EAAmB;AAACC,MAAAA,MAAM,EAAE,KAAKR,eAAL,CAAqBQ;AAA9B,KAAnB,CAAL,CACRO,IADQ,CACHC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADJ,EAECF,IAFD,CAEMC,GAAG,IAAI,KAAKG,aAAL,CAAmBH,GAAG,CAACgB,MAAvB,CAFb,EAGCX,KAHD,CAGOC,CAAC,IAAIC,OAAO,CAACC,KAAR,CAAc,uBAAuBF,CAAC,CAACG,OAAvC,CAHZ;AAIP;;AAEDQ,EAAAA,oBAAoB,GAAG;AACnB,SAAKjC,eAAL,CAAqBkC,KAArB;AACH;;AAEDf,EAAAA,aAAa,CAACgB,GAAD,EAAM;AACfZ,IAAAA,OAAO,CAACa,GAAR,CAAY,sBAAZ;AAEAb,IAAAA,OAAO,CAACa,GAAR,CAAYD,GAAZ;AAEA5B,IAAAA,KAAK,CAAC,SAAD,EAAY;AACbC,MAAAA,MAAM,EAAE,KAAKR,eAAL,CAAqBQ,MADhB;AAEbC,MAAAA,MAAM,EAAE,MAFK;AAGbC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,kBAAU;AAFL,OAHI;AAObC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACmB,QAAAA,MAAM,EAAEG;AAAT,OAAf;AAPO,KAAZ,CAAL,CAQGpB,IARH,CAQQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARf,EASKF,IATL,CASUc,QAAQ,IAAI;AAAE,UAAI,CAACA,QAAQ,CAACQ,MAAd,EAAsB;AAAE,aAAKjC,QAAL,CAAc;AAACyB,UAAAA,QAAQ,EAAE;AAAX,SAAd;AAA+B,OAAvD,MACR;AAAE,aAAKzB,QAAL,CAAc;AAACyB,UAAAA;AAAD,SAAd;AAA2B;;AAAA;AACxC,KAXL,EAYKR,KAZL,CAYWC,CAAC,IAAIC,OAAO,CAACC,KAAR,CAAc,uBAAuBF,CAAC,CAACG,OAAvC,CAZhB;AAcH;;AA2BDa,EAAAA,MAAM,GAAG;AAEL,UAAMC,QAAQ,GAAG;AACbC,MAAAA,MAAM,EAAE,OADK;AAEbC,MAAAA,aAAa,EAAE,QAFF;AAGbC,MAAAA,WAAW,EAAE,MAHA;AAIbC,MAAAA,MAAM,EAAE;AAJK,KAAjB;AAOA,UAAMC,SAAS,GAAG;AACdC,MAAAA,KAAK,EAAE,OADO;AAEdC,MAAAA,cAAc,EAAE,WAFF;AAGdC,MAAAA,UAAU,EAAE;AAHE,KAAlB;;AAKA,QAAG,CAAC,KAAKpB,KAAL,CAAWE,QAAX,CAAoBQ,MAAxB,EAAgC;AAC5B,0BACI;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,KAAK,EAAI;AAACW,UAAAA,SAAS,EAAE;AAAZ,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAI,QAAA,KAAK,EAAI;AAACH,UAAAA,KAAK,EAAE;AAAR,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CADJ,CADJ,eAII;AAAK,QAAA,KAAK,EAAE;AAACI,UAAAA,KAAK,EAAE,MAAR;AAAgBR,UAAAA,aAAa,EAAE,KAA/B;AAAsCO,UAAAA,SAAS,EAAE;AAAjD,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAQ,QAAA,SAAS,EAAG,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA0B,oBAAC,OAAD;AAAS,QAAA,KAAK,MAAd;AAAe,QAAA,EAAE,EAAC,SAAlB;AAA4B,QAAA,KAAK,EAAE;AAACF,UAAAA,cAAc,EAAE,MAAjB;AAAyBD,UAAAA,KAAK,EAAC;AAA/B,SAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA4E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAA5E,CAA1B,CADJ,CAJJ,CADJ;AAUH,KAXD,MAWO,IAAG,KAAKlB,KAAL,CAAWE,QAAX,CAAoBQ,MAApB,IAA8B,KAAKV,KAAL,CAAWtB,cAAX,KAA8B,CAAC,CAAhE,EAAmE;AACtE,0BACI;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAI,IAAf;AACA,QAAA,QAAQ,EAAG,eADX;AAEA,QAAA,OAAO,EAAE,KAAK6C,UAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAGA;AAAK,QAAA,KAAK,EAAI;AAACC,UAAAA,OAAO,EAAE,QAAV;AAAoBC,UAAAA,cAAc,EAAE;AAApC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAG,QAAA,KAAK,EAAG;AAACC,UAAAA,MAAM,EAAE;AAAT,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEADJ,eAEI;AAAQ,QAAA,SAAS,EAAG,MAApB;AAA2B,QAAA,OAAO,EAAG,MAAM,KAAK/C,YAAL,CAAkB,KAAKqB,KAAL,CAAWtB,cAA7B,CAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI;AAAQ,QAAA,SAAS,EAAG,MAApB;AAA2B,QAAA,OAAO,EAAI,KAAKqB,YAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ,CAHA,CADA,eAWJ;AAAK,QAAA,KAAK,EAAE;AAACuB,UAAAA,KAAK,EAAE,MAAR;AAAgBR,UAAAA,aAAa,EAAE,KAA/B;AAAsCO,UAAAA,SAAS,EAAE;AAAjD,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACY;AAAQ,QAAA,SAAS,EAAG,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA0B,oBAAC,OAAD;AAAS,QAAA,KAAK,MAAd;AAAe,QAAA,EAAE,EAAC,SAAlB;AAA4B,QAAA,KAAK,EAAE;AAACF,UAAAA,cAAc,EAAE,MAAjB;AAAyBD,UAAAA,KAAK,EAAC;AAA/B,SAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA4E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAA5E,CAA1B,CADZ,CAXI,eAcI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKlB,KAAL,CAAWE,QAAX,CAAoByB,GAApB,CAAyBC,OAAD,iBACrB;AAAI,QAAA,GAAG,EAAEA,OAAO,CAACC,KAAjB;AAAwB,QAAA,KAAK,EAAE;AAAEC,UAAAA,aAAa,EAAE;AAAjB,SAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,GAAG,EAAEF,OAAO,CAACG,UAAlB;AAA8B,QAAA,GAAG,EAAEH,OAAO,CAACG,UAA3C;AAAuD,QAAA,KAAK,EAAEnB,QAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,eAC6E;AAAM,QAAA,KAAK,EAAE;AAACE,UAAAA,aAAa,EAAE,QAAhB;AAA0BU,UAAAA,OAAO,EAAE,cAAnC;AAAmDX,UAAAA,MAAM,EAAE;AAA3D,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAD7E,eAEI;AAAK,QAAA,KAAK,EAAI;AAACS,UAAAA,KAAK,EAAE,KAAR;AAAeT,UAAAA,MAAM,EAAE,KAAvB;AAA8BmB,UAAAA,KAAK,EAAE,OAArC;AAA8CC,UAAAA,OAAO,EAAE;AAAvD,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAAoB,oBAAC,OAAD;AAAS,QAAA,EAAE,EAAE,WAAWL,OAAO,CAACC,KAAhC;AAAuC,QAAA,KAAK,EAAIZ,SAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4DW,OAAO,CAACC,KAApE,CAApB,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAG,oBAAC,OAAD;AAAS,QAAA,EAAE,EAAE,WAAWD,OAAO,CAACC,KAAhC;AAAuC,QAAA,KAAK,EAAIZ,SAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAH,CAFJ,eAGI;AAAQ,QAAA,KAAK,EAAI;AAACiB,UAAAA,eAAe,EAAE,oBAAlB;AAAwClB,UAAAA,MAAM,EAAE,MAAhD;AAAwDmB,UAAAA,MAAM,EAAE;AAAhE,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAHJ,CAFJ,CADH,CADL,CAdJ,CADJ;AA8BH,KA/BM,MA+BD;AACF,0BACI;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,KAAK,EAAE;AAACb,UAAAA,KAAK,EAAE,MAAR;AAAgBR,UAAAA,aAAa,EAAE,KAA/B;AAAsCO,UAAAA,SAAS,EAAE;AAAjD,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAQ,QAAA,SAAS,EAAG,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA0B,oBAAC,OAAD;AAAS,QAAA,KAAK,MAAd;AAAe,QAAA,EAAE,EAAC,SAAlB;AAA4B,QAAA,KAAK,EAAE;AAACF,UAAAA,cAAc,EAAE,MAAjB;AAAyBD,UAAAA,KAAK,EAAC;AAA/B,SAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA4E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAA5E,CAA1B,CADJ,CADJ,eAII;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKlB,KAAL,CAAWE,QAAX,CAAoByB,GAApB,CAAyBC,OAAD,iBACrB;AAAI,QAAA,GAAG,EAAEA,OAAO,CAACC,KAAjB;AAAwB,QAAA,KAAK,EAAE;AAAEC,UAAAA,aAAa,EAAE;AAAjB,SAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,GAAG,EAAEF,OAAO,CAACG,UAAlB;AAA8B,QAAA,GAAG,EAAEH,OAAO,CAACG,UAA3C;AAAuD,QAAA,KAAK,EAAEnB,QAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,eAC6E;AAAM,QAAA,KAAK,EAAE;AAACE,UAAAA,aAAa,EAAE,QAAhB;AAA0BU,UAAAA,OAAO,EAAE,cAAnC;AAAmDX,UAAAA,MAAM,EAAE;AAA3D,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAD7E,eAEI;AAAK,QAAA,KAAK,EAAI;AAACS,UAAAA,KAAK,EAAE,KAAR;AAAeT,UAAAA,MAAM,EAAE,KAAvB;AAA8BmB,UAAAA,KAAK,EAAE,OAArC;AAA8CC,UAAAA,OAAO,EAAE;AAAvD,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAAoB,oBAAC,OAAD;AAAS,QAAA,EAAE,EAAE,WAAWL,OAAO,CAACC,KAAhC;AAAuC,QAAA,KAAK,EAAIZ,SAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4DW,OAAO,CAACC,KAApE,CAApB,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAG,oBAAC,OAAD;AAAS,QAAA,EAAE,EAAE,WAAWD,OAAO,CAACC,KAAhC;AAAuC,QAAA,KAAK,EAAIZ,SAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAH,CAFJ,eAGI;AAAQ,QAAA,KAAK,EAAI;AAACiB,UAAAA,eAAe,EAAE,oBAAlB;AAAwClB,UAAAA,MAAM,EAAE,MAAhD;AAAwDmB,UAAAA,MAAM,EAAE;AAAhE,SAAjB;AACQ,QAAA,OAAO,EAAI,MAAM,KAAK5D,mBAAL,CAAyBqD,OAAO,CAACC,KAAjC,CADzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAHJ,CAFJ,CADH,CADL,CAJJ,CADJ;AAsBH;AAEJ;;AAzJsC;;AA6J3C,MAAMO,eAAe,GAAGpC,KAAK,IAAI;AAC7B,SAAO;AACLqC,IAAAA,YAAY,EAAErC,KAAK,CAACqC,YADf;AAEL5C,IAAAA,cAAc,EAAEO,KAAK,CAACP;AAFjB,GAAP;AAID,CALH;;AAQA,eAAe7B,OAAO,CAACwE,eAAD,CAAP,CAA0BnE,YAA1B,CAAf","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { logIn, logOut } from '../../redux/actions';\nimport Popup from 'reactjs-popup';\nimport '../../App.css';\n\n\nclass UserListings extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            urls: [],\n            listings: [],\n            tryingToDelete: -1\n        };\n\n        this.displayPhotos = this.displayPhotos.bind(this);\n\n    }\n\n    abortController = new AbortController();\n\tcomponentDidMount() {\n            fetch('/sessionroutes', {signal: this.abortController.signal})\n\t\t\t.then(res => res.json())\n            .then(res => this.displayPhotos(res.userId))\n            .catch(e => console.error(\"Critical failure: \" + e.message));   \n    }\n\n    componentWillUnmount() {\n        this.abortController.abort();\n    }\n\n    displayPhotos(uid) {\n        console.log('displayPhotos called')\n\n        console.log(uid)\n\n        fetch('/photos', {\n            signal: this.abortController.signal,\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            },\n            body: JSON.stringify({userId: uid})\n        }).then(res => res.json())\n            .then(listings => { if (!listings.length) { this.setState({listings: []}) }\n                    else{ this.setState({listings}) };\n            })\n            .catch(e => console.error(\"Critical failure: \" + e.message));\n\n    }\n\n    handleDeleteRequest = (id) => {\n        this.setState({tryingToDelete: id});\n    }\n\n    handleDelete = (id) => {\n\n        fetch('/deleteListing', {\n            signal: this.abortController.signal,\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            },\n            body: JSON.stringify({adId: id})\n        }).then(res => res.json())\n        .then(res => res.success && this.setState({tryingToDelete: -1}))\n        .then(() => this.displayPhotos(this.props.loggedInUserId))\n        .catch(e => console.error(\"Critical failure: \" + e.message));\n        \n    }\n\n    cancelDelete = () => {\n        this.setState({tryingToDelete: -1});\n    } \n\n    render() {\n\n        const imgStyle = {\n            height: \"290px\",\n            verticalAlign: \"middle\",\n            marginRight: \"20px\",\n            border: '2px solid rgb(255, 255, 255, 0.5)'\n        }\n\n        const textStyle = {\n            color: 'black',\n            textDecoration: 'underline',\n            fontWeight: '500'\n        }\n        if(!this.state.listings.length) {\n            return (\n                <div className=\"userListings\">\n                    <div style = {{textAlign: 'center'}}>\n                        <h2 style = {{color: 'white'}}>NIMATE ŠE OBJAVLJENIH OGLASOV.</h2>\n                    </div>\n                    <div style={{width: \"100%\", verticalAlign: 'top', textAlign: 'right'}}>\n                        <button className = 'btn'><NavLink exact to=\"/upload\" style={{textDecoration: \"none\", color:\"black\"}}><b>+ OBJAVI NOV OGLAS</b></NavLink></button>\n                    </div>\n                </div>\n            );\n        } else if(this.state.listings.length && this.state.tryingToDelete !== -1) {\n            return (\n                <div className=\"userListings\">\n                <Popup open = {true}\n                position = 'center center'\n                onClose={this.closeModal}>\n                <div style = {{display: 'inline', justifyContent: 'space-around'}}>\n                    <p style= {{margin: 'auto 10px'}}>Ste prepričani, da želite izbrisati oglas?</p>\n                    <button className = 'btnb' onClick ={() => this.handleDelete(this.state.tryingToDelete)}>DA</button>\n                    <button className = 'btnb' onClick = {this.cancelDelete}>NE</button>\n                </div>\n                </Popup>\n                \n            <div style={{width: \"100%\", verticalAlign: 'top', textAlign: 'right'}}>\n                        <button className = 'btn'><NavLink exact to=\"/upload\" style={{textDecoration: \"none\", color:\"black\"}}><b>+ OBJAVI NOV OGLAS</b></NavLink></button>\n                    </div>\n                    <div className=\"listingWrapper\">\n                        {this.state.listings.map((listing) =>\n                            <li key={listing.ad_id} style={{ listStyleType: \"none\" }}>\n                                <img src={listing.photo1_url} alt={listing.photo1_url} style={imgStyle}/><span style={{verticalAlign: \"middle\", display: \"inline-block\", height: \"100%\"}}></span>\n                                <div style = {{width: '60%', height: '80%', float: 'right', padding: '20px'}}>\n                                    <p>Številka oglasa: <NavLink to={\"/item?\" + listing.ad_id} style = {textStyle}>{listing.ad_id}</NavLink></p>\n                                    <p><NavLink to={\"/edit?\" + listing.ad_id} style = {textStyle}>  UREJANJE</NavLink></p>\n                                    <button style = {{backgroundColor: 'rgb(255,255,255,0)', border: 'none', cursor: 'pointer'}}>X IZBRIŠI</button>\n                                </div>\n                            </li>\n                        )}\n                    </div>\n                </div>  \n            )\n\n        }else {\n            return (\n                <div className=\"userListings\">\n                    <div style={{width: \"100%\", verticalAlign: 'top', textAlign: 'right'}}>\n                        <button className = 'btn'><NavLink exact to=\"/upload\" style={{textDecoration: \"none\", color:\"black\"}}><b>+ OBJAVI NOV OGLAS</b></NavLink></button>\n                    </div>\n                    <div className=\"listingWrapper\">\n                        {this.state.listings.map((listing) =>\n                            <li key={listing.ad_id} style={{ listStyleType: \"none\" }}>\n                                <img src={listing.photo1_url} alt={listing.photo1_url} style={imgStyle}/><span style={{verticalAlign: \"middle\", display: \"inline-block\", height: \"100%\"}}></span>\n                                <div style = {{width: '60%', height: '80%', float: 'right', padding: '20px'}}>\n                                    <p>Številka oglasa: <NavLink to={\"/item?\" + listing.ad_id} style = {textStyle}>{listing.ad_id}</NavLink></p>\n                                    <p><NavLink to={\"/edit?\" + listing.ad_id} style = {textStyle}>  UREJANJE</NavLink></p>\n                                    <button style = {{backgroundColor: 'rgb(255,255,255,0)', border: 'none', cursor: 'pointer'}}\n                                            onClick = {() => this.handleDeleteRequest(listing.ad_id)}>X IZBRIŠI</button>\n                                </div>\n                            </li>\n                        )}\n                    </div>\n    \n                </div>\n            );\n\n        }\n\n    }\n\n}\n\nconst mapStateToProps = state => {\n    return {\n      loggedInUser: state.loggedInUser,\n      loggedInUserId: state.loggedInUserId\n    };\n  };\n\n\nexport default connect(mapStateToProps) (UserListings);\n\n"]},"metadata":{},"sourceType":"module"}