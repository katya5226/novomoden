{"ast":null,"code":"var _jsxFileName = \"/home/katja/REACT/test-app/src/pages/UserPage/UserListings.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { logIn, logOut } from '../../redux/actions';\nimport '../../App.css';\n\nclass UserListings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.abortController = new AbortController();\n    this.state = {\n      urls: [],\n      listings: []\n    };\n    this.displayPhotos = this.displayPhotos.bind(this);\n  }\n\n  componentDidMount() {\n    fetch('/sessionroutes', {\n      signal: this.abortController.signal\n    }).then(res => res.json()).then(res => this.displayPhotos(res.userId)).catch(e => console.error(\"Critical failure: \" + e.message));\n  }\n\n  componentWillUnmount() {\n    this.abortController.abort();\n  }\n\n  displayPhotos(uid) {\n    try {\n      fetch('/photos', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          userId: uid\n        })\n      }).then(res => res.json()).then(listings => {\n        this.setState({\n          listings\n        });\n      });\n    } catch (err) {\n      console.log(\"ERROR\");\n    }\n  }\n\n  render() {\n    const imgStyle = {\n      height: \"290px\",\n      verticalAlign: \"middle\",\n      marginRight: \"20px\",\n      border: '2px solid rgb(255, 255, 255, 0.5)'\n    };\n    const textStyle = {\n      color: 'black',\n      textDecoration: 'underline',\n      fontWeight: '500'\n    };\n\n    if (!this.state.listings.length) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        style: {\n          color: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 26\n        }\n      }, \"NIMATE \\u0160E OBJAVLJENIH OGLASOV.\"));\n    } else {}\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"userListings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: \"100%\",\n        verticalAlign: 'top',\n        textAlign: 'right'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      exact: true,\n      to: \"/upload\",\n      style: {\n        textDecoration: \"none\",\n        color: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 47\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 123\n      }\n    }, \"+ OBJAVI NOV OGLAS\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"listingWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, this.state.listings.map(listing => /*#__PURE__*/React.createElement(\"li\", {\n      key: listing.ad_id,\n      style: {\n        listStyleType: \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: listing.photo1_url,\n      alt: listing.photo1_url,\n      style: imgStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        verticalAlign: \"middle\",\n        display: \"inline-block\",\n        height: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 102\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: '60%',\n        height: '80%',\n        float: 'right',\n        padding: '20px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 33\n      }\n    }, \"\\u0160tevilka oglasa: \", /*#__PURE__*/React.createElement(NavLink, {\n      to: \"/item?\" + listing.ad_id,\n      style: textStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 53\n      }\n    }, listing.ad_id)), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      to: \"/edit?\" + listing.ad_id,\n      style: textStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 36\n      }\n    }, \"  UREJANJE\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 33\n      }\n    }, \"IZBRI\\u0160I\"))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    loggedInUser: state.loggedInUser,\n    loggedInUserId: state.loggedInUserId\n  };\n};\n\nexport default connect(mapStateToProps)(UserListings);","map":{"version":3,"sources":["/home/katja/REACT/test-app/src/pages/UserPage/UserListings.jsx"],"names":["React","connect","NavLink","logIn","logOut","UserListings","Component","constructor","props","abortController","AbortController","state","urls","listings","displayPhotos","bind","componentDidMount","fetch","signal","then","res","json","userId","catch","e","console","error","message","componentWillUnmount","abort","uid","method","headers","body","JSON","stringify","setState","err","log","render","imgStyle","height","verticalAlign","marginRight","border","textStyle","color","textDecoration","fontWeight","length","width","textAlign","map","listing","ad_id","listStyleType","photo1_url","display","float","padding","mapStateToProps","loggedInUser","loggedInUserId"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { logIn, logOut } from '../../redux/actions';\nimport '../../App.css';\n\n\nclass UserListings extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            urls: [],\n            listings: []\n        };\n\n        this.displayPhotos = this.displayPhotos.bind(this);\n\n    }\n\n    abortController = new AbortController();\n\tcomponentDidMount() {\n            fetch('/sessionroutes', {signal: this.abortController.signal})\n\t\t\t.then(res => res.json())\n            .then(res => this.displayPhotos(res.userId))\n            .catch(e => console.error(\"Critical failure: \" + e.message));   \n    }\n\n    componentWillUnmount() {\n        this.abortController.abort();\n    }\n\n    displayPhotos(uid) {\n        try {\n            fetch('/photos', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json'\n                },\n                body: JSON.stringify({userId: uid})\n            }).then(res => res.json())\n                .then(listings => {this.setState({listings});});\n        }catch (err) {\n            console.log(\"ERROR\");\n        }\n\n    }\n\n    render() {\n\n        const imgStyle = {\n            height: \"290px\",\n            verticalAlign: \"middle\",\n            marginRight: \"20px\",\n            border: '2px solid rgb(255, 255, 255, 0.5)'\n        }\n\n        const textStyle = {\n            color: 'black',\n            textDecoration: 'underline',\n            fontWeight: '500'\n        }\n\n        if(!this.state.listings.length) {\n            return (<div><h2 style = {{color: 'white'}}>NIMATE ŠE OBJAVLJENIH OGLASOV.</h2></div>)\n        } else {\n\n\n        }\n\n        return (\n            <div className=\"userListings\">\n                <div style={{width: \"100%\", verticalAlign: 'top', textAlign: 'right'}}>\n                    <button className = 'btn'><NavLink exact to=\"/upload\" style={{textDecoration: \"none\", color:\"black\"}}><b>+ OBJAVI NOV OGLAS</b></NavLink></button>\n                </div>\n                <div className=\"listingWrapper\">\n                    {this.state.listings.map((listing) =>\n                        <li key={listing.ad_id} style={{ listStyleType: \"none\" }}>\n                            <img src={listing.photo1_url} alt={listing.photo1_url} style={imgStyle}/><span style={{verticalAlign: \"middle\", display: \"inline-block\", height: \"100%\"}}></span>\n                            <div style = {{width: '60%', height: '80%', float: 'right', padding: '20px'}}>\n                                <p>Številka oglasa: <NavLink to={\"/item?\" + listing.ad_id} style = {textStyle}>{listing.ad_id}</NavLink></p>\n                                <p><NavLink to={\"/edit?\" + listing.ad_id} style = {textStyle}>  UREJANJE</NavLink></p>\n                                <p>IZBRIŠI</p>\n                            </div>\n\n                        </li>\n                    )}\n                </div>\n\n            </div>\n        );\n\n    }\n\n}\n\nconst mapStateToProps = state => {\n    return {\n      loggedInUser: state.loggedInUser,\n      loggedInUserId: state.loggedInUserId\n    };\n  };\n\n\nexport default connect(mapStateToProps) (UserListings);\n\n"]},"metadata":{},"sourceType":"module"}