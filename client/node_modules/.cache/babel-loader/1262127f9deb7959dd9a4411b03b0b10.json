{"ast":null,"code":"import _classCallCheck from\"/home/katni/REACT/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/katni/REACT/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/katni/REACT/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/katni/REACT/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import UpperLine from'../../components/UpperLine';import Header from'../../components/Header';import Bottom from'../../components/Bottom';import BreadCrumbs from'../../components/BreadCrumbs';import CategoryListings from'./CategoryListings';import NavBar from'../../components/NavBar';var SellerListings=/*#__PURE__*/function(_React$Component){_inherits(SellerListings,_React$Component);var _super=_createSuper(SellerListings);function SellerListings(props){var _this;_classCallCheck(this,SellerListings);_this=_super.call(this,props);_this.abortController=new AbortController();_this.paginationButtonClick=function(e){function subStrBeforeChars(str,char){return str.substring(0,str.indexOf(char));}var location;if(window.location.href.includes('=')){location=subStrBeforeChars(window.location.href,'=');}else{location=window.location.href;}var newpage=1;switch(e.target.id){case'first':_this.setState({page:1});window.history.replaceState(null,\"\",location+'=1');break;case'previous':_this.state.page>1?newpage=_this.state.page-1:newpage=1;_this.setState({page:newpage});window.history.replaceState(null,\"\",location+'='+newpage);break;case'next':_this.state.page<_this.state.numPages?newpage=_this.state.page+1:newpage=_this.state.numPages;_this.setState({page:newpage});window.history.replaceState(null,\"\",location+'='+newpage);break;case'last':_this.setState({page:_this.state.numPages});window.history.replaceState(null,\"\",location+'='+_this.state.numPages);break;default:return null;}};_this.adsDiv=function(){if(_this.state.ads.length===0){return/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",maxWidth:\"90vw\",minHeight:'30vh',justifyContent:'center'}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{style:{color:'white'}},\"OPROSTITE, TA UPORABNIK NIMA AKTIVNIH OGLASOV!\")));}else{var numAds=_this.state.ads.length;var n=_this.state.adsPerPage;var p=_this.state.page-1;var till;p*n+n<numAds?till=(p+1)*n:till=numAds;var adsPortion=_this.state.ads.slice(p*n,till);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",maxWidth:\"100vw\",paddingLeft:'5vw',paddingRight:'5vw'}},/*#__PURE__*/React.createElement(CategoryListings,{ads:adsPortion})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{id:\"first\",className:\"btn_nopad\",onClick:_this.paginationButtonClick},\"PRVA\"),/*#__PURE__*/React.createElement(\"button\",{id:\"previous\",className:\"btn_nopad\",onClick:_this.paginationButtonClick},\"<<\"),/*#__PURE__*/React.createElement(\"button\",{id:\"current\",className:\"btn_nopad\"},_this.state.page,\"/\",_this.state.numPages),/*#__PURE__*/React.createElement(\"button\",{id:\"next\",className:\"btn_nopad\",onClick:_this.paginationButtonClick},\">>\"),/*#__PURE__*/React.createElement(\"button\",{id:\"last\",className:\"btn_nopad\",onClick:_this.paginationButtonClick},\"ZADNJA\")));}};_this.state={ads:[],adsPerPage:5,numPages:1,page:1};return _this;}_createClass(SellerListings,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;function subStrAfterChars(str,char){return str.substring(str.indexOf(char)+1);}function subStrBetweenChars(str,char1,char2){return str.substring(str.indexOf(char1)+1,str.indexOf(char2));}var sellerId;if(window.location.href.includes('=')){sellerId=subStrBetweenChars(window.location.href,'?','=');var page=parseInt(subStrAfterChars(window.location.href,'='));this.setState({page:page});}else{sellerId=subStrAfterChars(window.location.href,'?');}fetch('/allphotos',{signal:this.abortController.signal,method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json'},body:JSON.stringify({type:2,sellerId:sellerId})}).then(function(res){return res.json();}).then(function(ads){return _this2.setState({ads:ads,numPages:Math.floor(ads.length/_this2.state.adsPerPage+0.99)});}).catch(function(e){return console.error(\"Critical failure: \"+e.message);});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.abortController.abort();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(UpperLine,null),/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(NavBar,null),/*#__PURE__*/React.createElement(BreadCrumbs,{pathname:this.props.location.pathname}),this.adsDiv(),/*#__PURE__*/React.createElement(Bottom,null));}}]);return SellerListings;}(React.Component);export default SellerListings;","map":{"version":3,"sources":["/home/katni/REACT/test-app/src/pages/Listings/SellerListings.jsx"],"names":["React","UpperLine","Header","Bottom","BreadCrumbs","CategoryListings","NavBar","SellerListings","props","abortController","AbortController","paginationButtonClick","e","subStrBeforeChars","str","char","substring","indexOf","location","window","href","includes","newpage","target","id","setState","page","history","replaceState","state","numPages","adsDiv","ads","length","display","maxWidth","minHeight","justifyContent","color","numAds","n","adsPerPage","p","till","adsPortion","slice","paddingLeft","paddingRight","subStrAfterChars","subStrBetweenChars","char1","char2","sellerId","parseInt","fetch","signal","method","headers","body","JSON","stringify","type","then","res","json","Math","floor","catch","console","error","message","abort","pathname","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport UpperLine from '../../components/UpperLine';\nimport Header from '../../components/Header';\nimport Bottom from '../../components/Bottom';\nimport BreadCrumbs from '../../components/BreadCrumbs';\nimport CategoryListings from './CategoryListings';\nimport NavBar from '../../components/NavBar';\n\n\nclass SellerListings extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            ads: [],\n            adsPerPage: 5,\n            numPages: 1,\n            page: 1 \n        };\n    }\n    \n    abortController = new AbortController();\n\tcomponentDidMount() {\n        function subStrAfterChars(str, char) {\n            return str.substring(str.indexOf(char) + 1);\n        }\n        function subStrBetweenChars(str, char1, char2) {\n            return str.substring(str.indexOf(char1) + 1, str.indexOf(char2));\n        }\n        let sellerId;\n        if(window.location.href.includes('=')) {\n            sellerId = subStrBetweenChars(window.location.href, '?', '=');\n            let page = parseInt(subStrAfterChars(window.location.href, '='));\n            this.setState({page});\n        }\n        else {\n            sellerId = subStrAfterChars(window.location.href, '?');\n        }\n        fetch('/allphotos', {\n            signal: this.abortController.signal,\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            },\n            body: JSON.stringify({\n                type: 2,\n                sellerId: sellerId\n            })\n        }).then(res => res.json())\n        .then(ads => this.setState({ads: ads, numPages: Math.floor(ads.length/this.state.adsPerPage + 0.99)}))\n        .catch(e => console.error(\"Critical failure: \" + e.message));\n\n    }\n\n    componentWillUnmount() {\n        this.abortController.abort();\n    }\n\n    paginationButtonClick = (e) => {\n        function subStrBeforeChars(str, char) {\n            return str.substring(0, str.indexOf(char));\n        }\n        let location;\n        if(window.location.href.includes('=')) {location = subStrBeforeChars(window.location.href, '=');}\n        else{location = window.location.href;}\n        let newpage = 1;\n        switch(e.target.id) {\n            case 'first':\n                this.setState({page: 1});\n                window.history.replaceState(null, \"\", location + '=1');\n                break;\n            case 'previous':\n                this.state.page > 1 ? newpage = this.state.page-1 : newpage = 1;\n                this.setState({page: newpage});\n                window.history.replaceState(null, \"\", location + '=' + newpage);\n                break;\n            case 'next':\n                this.state.page < this.state.numPages ? newpage = this.state.page+1 : newpage = this.state.numPages;\n                this.setState({page: newpage});\n                window.history.replaceState(null, \"\", location + '=' + newpage);\n                break;\n            case 'last':\n                this.setState({page: this.state.numPages});\n                window.history.replaceState(null, \"\", location + '=' + this.state.numPages);\n                break;\n            default:\n                return null;\n        }\n    }\n\n    adsDiv = () => {\n        if (this.state.ads.length === 0) {\n            return (\n                <div style={{display: \"flex\", maxWidth: \"90vw\", minHeight: '30vh', justifyContent: 'center'}}>\n                    <div><h2 style = {{color: 'white'}}>OPROSTITE, TA UPORABNIK NIMA AKTIVNIH OGLASOV!</h2></div>\n                </div>\n            )\n        } else {\n            let numAds = this.state.ads.length;\n            let n = this.state.adsPerPage;\n            let p = this.state.page - 1;\n            let till;\n            p*n + n < numAds ? till = (p+1)*n : till = numAds;\n            let adsPortion = this.state.ads.slice(p*n, till);\n            return (\n                <div>\n                    <div style={{display: \"flex\", maxWidth: \"100vw\", paddingLeft: '5vw', paddingRight: '5vw'}}>\n                        <CategoryListings ads = {adsPortion}/>\n                    </div>\n                    <div>\n                        <button id='first' className='btn_nopad' onClick={this.paginationButtonClick}>PRVA</button>\n                        <button id='previous' className='btn_nopad' onClick={this.paginationButtonClick}>&#60;&#60;</button>\n                        <button id='current' className='btn_nopad'>{this.state.page}/{this.state.numPages}</button>\n                        <button id='next' className='btn_nopad' onClick={this.paginationButtonClick}>&#62;&#62;</button>\n                        <button id='last' className='btn_nopad' onClick={this.paginationButtonClick}>ZADNJA</button>\n                    </div>\n                </div>\n            )\n        }\n    }\n\n    render() {\n        return <div className=\"App\">\n                    <UpperLine/>\n                    <Header/>\n                    <NavBar/>\n                    <BreadCrumbs pathname = {this.props.location.pathname}/>\n                    {this.adsDiv()}\n                    <Bottom/>\n                </div>\n    }\n\n}\n\n\nexport default SellerListings;\n"]},"metadata":{},"sourceType":"module"}