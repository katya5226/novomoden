{"ast":null,"code":"var _jsxFileName = \"/home/katja/REACT/test-app/src/pages/LogInPage.jsx\";\nimport React from 'react';\nimport { NavLink } from \"react-router-dom\";\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport { logIn, logOut } from '../redux/actions';\nimport '../App.css';\nimport SignInForm from '../components/SignInForm';\nimport Header from '../components/Header';\nimport AdSpace from '../components/AdSpace';\nimport UpperLine from '../components/UpperLine';\nimport Bottom from '../components/Bottom';\nimport BreadCrumbs from '../components/BreadCrumbs';\n\nclass LogInPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.abortController = new AbortController();\n\n    this.handleClickLogIn = e => {\n      e.preventDefault();\n\n      if (this.state.loginEmail !== '' && this.state.loginPassword !== '') {\n        fetch('/loginroutes', {\n          signal: this.abortController.signal,\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n          },\n          body: JSON.stringify({\n            enjoyer: {\n              email: this.state.loginEmail,\n              password: this.state.loginPassword\n            },\n            type: \"login\"\n          })\n        }).then(res => res.json()).then(result => {\n          if (result.success === \"login sucessfull\") {\n            //this.setState({loggedInUser: result.loggedInUser, loggedInUserId: result.uid, logInText:result.success})\n            this.setState({\n              logInText: result.success\n            }, () => this.props.logIn(result.loggedInUser, result.uid));\n            this.props.history.push(\"/\");\n          } else {\n            this.setState({\n              logInText: result.success\n            });\n          }\n        });\n      } else {\n        console.log(\"LOGIN FAILED\");\n        this.setState({\n          logInText: 'Napaka pri vnosu'\n        });\n      }\n\n      this.setState({\n        logInText: '',\n        loginEmail: '',\n        loginPassword: ''\n      });\n    };\n\n    this.state = {\n      //loggedInUser: 'guest',\n      //loggedInUserId: '',\n      loginEmail: '',\n      loginPassword: '',\n      logInText: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClickLogIn = this.handleClickLogIn.bind(this);\n  }\n\n  componentDidMount() {\n    fetch('/sessionroutes', {\n      signal: this.abortController.signal\n    }).then(res => res.json()).then(res => this.props.logIn(res.loggedInUser, res.userId));\n    console.log(\"Logged in user ID: \" + this.props.loggedInUserId);\n  }\n\n  componentWillUnmount() {\n    this.abortController.abort();\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  render() {\n    const style = {\n      textAlign: \"center\",\n      marginTop: \"10vh\",\n      paddingLeft: \"30vw\",\n      paddingRight: \"30vw\"\n    };\n    const linkStyle = {\n      textDecoration: 'none',\n      color: 'black'\n    };\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(UpperLine, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(BreadCrumbs, {\n      pathname: this.props.location.pathname,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: style,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(SignInForm, {\n      loginEmail: this.state.loginEmail,\n      loginPassword: this.state.loginPassword,\n      handleChange: this.handleChange,\n      handleClickLogIn: this.handleClickLogIn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, this.state.logInText), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        color: 'white',\n        textShadow: '1px 1px black'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }, \"\\u0160e nima\\u0161 uporabni\\u0161kega ra\\u010Duna?\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      to: \"/signUp_page\",\n      style: linkStyle,\n      activeStyle: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 57\n      }\n    }, \"SIGN UP\"))), /*#__PURE__*/React.createElement(AdSpace, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Bottom, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    loggedInUser: state.loggedInUser,\n    loggedInUserId: state.loggedInUserId\n  };\n};\n\nconst mapDispatchToProps = {\n  logIn: logIn,\n  logOut: logOut\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(LogInPage);","map":{"version":3,"sources":["/home/katja/REACT/test-app/src/pages/LogInPage.jsx"],"names":["React","NavLink","BrowserRouter","Router","Route","Switch","Redirect","connect","logIn","logOut","SignInForm","Header","AdSpace","UpperLine","Bottom","BreadCrumbs","LogInPage","Component","constructor","props","abortController","AbortController","handleClickLogIn","e","preventDefault","state","loginEmail","loginPassword","fetch","signal","method","headers","body","JSON","stringify","enjoyer","email","password","type","then","res","json","result","success","setState","logInText","loggedInUser","uid","history","push","console","log","handleChange","bind","componentDidMount","userId","loggedInUserId","componentWillUnmount","abort","event","target","name","value","render","style","textAlign","marginTop","paddingLeft","paddingRight","linkStyle","textDecoration","color","location","pathname","textShadow","fontWeight","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { NavLink } from \"react-router-dom\";\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport { logIn, logOut } from '../redux/actions';\nimport '../App.css';\nimport SignInForm from '../components/SignInForm';\nimport Header from '../components/Header';\nimport AdSpace from '../components/AdSpace';\nimport UpperLine from '../components/UpperLine';\nimport Bottom from '../components/Bottom';\nimport BreadCrumbs from '../components/BreadCrumbs';\n\nclass LogInPage extends React.Component {\n\n    constructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            //loggedInUser: 'guest',\n\t\t\t//loggedInUserId: '',\n\t\t\tloginEmail: '',\n\t\t\tloginPassword: '',\n\t\t\tlogInText: ''\n\t\t};\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.handleClickLogIn = this.handleClickLogIn.bind(this);\n    }\n    \n    abortController = new AbortController();\n\tcomponentDidMount() {\n\t\tfetch('/sessionroutes', {\n            signal: this.abortController.signal})\n\t\t\t.then(res => res.json())\n            .then(res => this.props.logIn(res.loggedInUser, res.userId));\n        \n            console.log(\"Logged in user ID: \" + this.props.loggedInUserId);\n    }\n\n    componentWillUnmount() {\n        this.abortController.abort();\n    }\n    \n\thandleClickLogIn = (e) => {\n        e.preventDefault();\n\t\tif(this.state.loginEmail !== '' &&\n\t\tthis.state.loginPassword !== '') {\n\t\t\tfetch('/loginroutes', {\n                signal: this.abortController.signal,\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Accept': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tenjoyer: {\n\t\t\t\t\t\temail: this.state.loginEmail,\n\t\t\t\t\t\tpassword: this.state.loginPassword\n                    },\n                    type: \"login\"\n\t\t\t\t})\n            }).then(res => res.json())\n                .then(result => {\n                    if(result.success === \"login sucessfull\") {\n                        //this.setState({loggedInUser: result.loggedInUser, loggedInUserId: result.uid, logInText:result.success})\n                        this.setState({logInText: result.success},() => this.props.logIn(result.loggedInUser, result.uid));\n                        this.props.history.push(\"/\");\n                    } else {\n                        this.setState({logInText:result.success})\n                    }\n                })\n\n        }else {console.log(\"LOGIN FAILED\"); this.setState({logInText: 'Napaka pri vnosu'})}\n        this.setState({\n            logInText:'',\n            loginEmail:'',\n\t\t\tloginPassword:'',\n        })\n    }\n    \n    handleChange(event) {\n\t\tthis.setState({\n\t\t\t[event.target.name]: event.target.value\n\t\t})\n    }\n\n    render() {\n\n        const style = {\n            textAlign: \"center\",\n            marginTop: \"10vh\",\n            paddingLeft: \"30vw\",\n            paddingRight: \"30vw\"\n        }\n\n        const linkStyle = {\n            textDecoration: 'none',\n            color: 'black'\n        }\n\n        return (\n            <>\n                <UpperLine/>\n                <Header/>\n                <BreadCrumbs pathname = {this.props.location.pathname}/>\n                <div style={style}>\n                <SignInForm\n                    loginEmail={this.state.loginEmail}\n                    loginPassword={this.state.loginPassword}\n                    handleChange={this.handleChange}\n                    handleClickLogIn={this.handleClickLogIn}/>\n                <p>{this.state.logInText}</p>\n                <br/>\n                <p style = {{color: 'white', textShadow: '1px 1px black'}}>Še nimaš uporabniškega računa?</p>\n                <button type = 'submit' className=\"btn\"><NavLink to=\"/signUp_page\" style={linkStyle} activeStyle={{fontWeight: \"bold\"}}>SIGN UP</NavLink></button>\n                </div>\n                <AdSpace/>\n                <Bottom/>\n            </>\n        );\n\n    }\n\n\n}\n\nconst mapStateToProps = state => {\n    return {\n      loggedInUser: state.loggedInUser,\n      loggedInUserId: state.loggedInUserId\n    };\n  };\n  \n  const mapDispatchToProps = {\n    logIn: logIn,\n    logOut: logOut\n  };\n\nexport default connect(mapStateToProps, mapDispatchToProps) (LogInPage);"]},"metadata":{},"sourceType":"module"}