{"ast":null,"code":"import _defineProperty from\"/home/katni/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/katni/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/katni/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/katni/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/katni/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/katni/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{NavLink}from\"react-router-dom\";import{connect}from'react-redux';import{logIn,logOut}from'../redux/actions';import'../App.css';import SignInForm from'../components/SignInForm';import Header from'../components/Header';import NavBar from'../components/NavBar';import AdSpace from'../components/AdSpace';import UpperLine from'../components/UpperLine';import Bottom from'../components/Bottom';import BreadCrumbs from'../components/BreadCrumbs';var LogInPage=/*#__PURE__*/function(_React$Component){_inherits(LogInPage,_React$Component);var _super=_createSuper(LogInPage);function LogInPage(props){var _this;_classCallCheck(this,LogInPage);_this=_super.call(this,props);_this.abortController=new AbortController();_this.handleClickLogIn=function(e){e.preventDefault();if(_this.state.loginEmail!==''&&_this.state.loginPassword!==''){fetch('/api/loginroutes',{signal:_this.abortController.signal,method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json'},body:JSON.stringify({enjoyer:{email:_this.state.loginEmail,password:_this.state.loginPassword},type:\"login\"})}).then(function(res){return res.json();}).then(function(result){if(result.success===\"login sucessfull\"){//this.setState({loggedInUser: result.loggedInUser, loggedInUserId: result.uid, logInText:result.success})\n_this.setState({logInText:result.success},function(){return _this.props.logIn(result.loggedInUser,result.uid);});_this.props.history.push(\"/\");}else{_this.setState({logInText:result.success});}});}else{console.log(\"LOGIN FAILED\");_this.setState({logInText:'Napaka pri vnosu'});}_this.setState({logInText:'',loginEmail:'',loginPassword:''});};_this.state={//loggedInUser: 'guest',\n//loggedInUserId: '',\nloginEmail:'',loginPassword:'',logInText:''};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleClickLogIn=_this.handleClickLogIn.bind(_assertThisInitialized(_this));return _this;}_createClass(LogInPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('/api/sessionroutes',{signal:this.abortController.signal}).then(function(res){return res.json();}).then(function(res){return _this2.props.logIn(res.loggedInUser,res.userId);});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.abortController.abort();}},{key:\"handleChange\",value:function handleChange(event){this.setState(_defineProperty({},event.target.name,event.target.value));}},{key:\"render\",value:function render(){var style={textAlign:\"center\",marginTop:\"10vh\",paddingLeft:\"30vw\",paddingRight:\"30vw\"};var confirmed=window.location.href.includes('?confirmed');return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(UpperLine,null),/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(NavBar,null),/*#__PURE__*/React.createElement(BreadCrumbs,{pathname:this.props.location.pathname}),/*#__PURE__*/React.createElement(\"div\",{style:style},confirmed&&/*#__PURE__*/React.createElement(\"p\",{style:{color:'white'}},/*#__PURE__*/React.createElement(\"b\",null,\"USPE\\u0160NO STE POTRDILI SVOJ E-NASLOV! PRIJAVITE SE Z UPORABNI\\u0160KIM IMENOM IN GESLOM.\")),/*#__PURE__*/React.createElement(SignInForm,{loginEmail:this.state.loginEmail,loginPassword:this.state.loginPassword,handleChange:this.handleChange,handleClickLogIn:this.handleClickLogIn}),/*#__PURE__*/React.createElement(\"p\",{style:{color:'red',textShadow:'1px 1px black'}},this.state.logInText),this.state.logInText==='Unconfirmed'&&/*#__PURE__*/React.createElement(\"div\",{style:{color:'white'}},/*#__PURE__*/React.createElement(\"p\",null,\"Va\\u0161 po\\u0161tni naslov \\u0161e ni potrjen. Preverite svoj po\\u0161tni nabiralnik, vklju\\u010Dno z vsiljeno po\\u0161to.\"),/*#__PURE__*/React.createElement(\"p\",null,\"\\u010Ce niste dobili e-po\\u0161te ali pa je povezava potekla, kliknite \",/*#__PURE__*/React.createElement(NavLink,{to:\"/requestconfirmemail\"},\"tukaj\"),\".\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",{style:{color:'white',textShadow:'1px 1px black'}},\"\\u0160e nima\\u0161 uporabni\\u0161kega ra\\u010Duna?\"),/*#__PURE__*/React.createElement(NavLink,{to:\"/signUp_page\",className:\"btnb\",activeStyle:{fontWeight:\"bold\"}},\"REGISTRIRAJ SE\")),/*#__PURE__*/React.createElement(AdSpace,null),/*#__PURE__*/React.createElement(Bottom,null));}}]);return LogInPage;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{loggedInUser:state.loggedInUser,loggedInUserId:state.loggedInUserId};};var mapDispatchToProps={logIn:logIn,logOut:logOut};export default connect(mapStateToProps,mapDispatchToProps)(LogInPage);","map":{"version":3,"sources":["/home/katni/APP/client/src/pages/LogInPage.jsx"],"names":["React","NavLink","connect","logIn","logOut","SignInForm","Header","NavBar","AdSpace","UpperLine","Bottom","BreadCrumbs","LogInPage","props","abortController","AbortController","handleClickLogIn","e","preventDefault","state","loginEmail","loginPassword","fetch","signal","method","headers","body","JSON","stringify","enjoyer","email","password","type","then","res","json","result","success","setState","logInText","loggedInUser","uid","history","push","console","log","handleChange","bind","userId","abort","event","target","name","value","style","textAlign","marginTop","paddingLeft","paddingRight","confirmed","window","location","href","includes","pathname","color","textShadow","fontWeight","Component","mapStateToProps","loggedInUserId","mapDispatchToProps"],"mappings":"g1BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,KAAT,CAAgBC,MAAhB,KAA8B,kBAA9B,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,C,GAEMC,CAAAA,S,kHAEF,mBAAYC,KAAZ,CAAmB,2CACrB,uBAAMA,KAAN,EADqB,MAanBC,eAbmB,CAaD,GAAIC,CAAAA,eAAJ,EAbC,OAyBtBC,gBAzBsB,CAyBH,SAACC,CAAD,CAAO,CACnBA,CAAC,CAACC,cAAF,GACN,GAAG,MAAKC,KAAL,CAAWC,UAAX,GAA0B,EAA1B,EACH,MAAKD,KAAL,CAAWE,aAAX,GAA6B,EAD7B,CACiC,CAChCC,KAAK,CAAC,kBAAD,CAAqB,CACbC,MAAM,CAAE,MAAKT,eAAL,CAAqBS,MADhB,CAEzBC,MAAM,CAAE,MAFiB,CAGzBC,OAAO,CAAE,CACR,eAAgB,kBADR,CAER,SAAU,kBAFF,CAHgB,CAOzBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACpBC,OAAO,CAAE,CACRC,KAAK,CAAE,MAAKX,KAAL,CAAWC,UADV,CAERW,QAAQ,CAAE,MAAKZ,KAAL,CAAWE,aAFb,CADW,CAKLW,IAAI,CAAE,OALD,CAAf,CAPmB,CAArB,CAAL,CAcYC,IAdZ,CAciB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAdpB,EAecF,IAfd,CAemB,SAAAG,MAAM,CAAI,CACZ,GAAGA,MAAM,CAACC,OAAP,GAAmB,kBAAtB,CAA0C,CACtC;AACA,MAAKC,QAAL,CAAc,CAACC,SAAS,CAAEH,MAAM,CAACC,OAAnB,CAAd,CAA0C,iBAAM,OAAKxB,KAAL,CAAWV,KAAX,CAAiBiC,MAAM,CAACI,YAAxB,CAAsCJ,MAAM,CAACK,GAA7C,CAAN,EAA1C,EACA,MAAK5B,KAAL,CAAW6B,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACH,CAJD,IAIO,CACH,MAAKL,QAAL,CAAc,CAACC,SAAS,CAACH,MAAM,CAACC,OAAlB,CAAd,EACH,CACJ,CAvBd,EAyBM,CA3BP,IA2BY,CAACO,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA6B,MAAKP,QAAL,CAAc,CAACC,SAAS,CAAE,kBAAZ,CAAd,EAA+C,CACnF,MAAKD,QAAL,CAAc,CACVC,SAAS,CAAC,EADA,CAEVnB,UAAU,CAAC,EAFD,CAGnBC,aAAa,CAAC,EAHK,CAAd,EAKH,CA5DkB,CAErB,MAAKF,KAAL,CAAa,CACH;AACT;AACAC,UAAU,CAAE,EAHA,CAIZC,aAAa,CAAE,EAJH,CAKZkB,SAAS,CAAE,EALC,CAAb,CAOA,MAAKO,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CACA,MAAK/B,gBAAL,CAAwB,MAAKA,gBAAL,CAAsB+B,IAAtB,+BAAxB,CAVqB,aAWlB,C,mFAGgB,iBACnBzB,KAAK,CAAC,oBAAD,CAAuB,CAClBC,MAAM,CAAE,KAAKT,eAAL,CAAqBS,MADX,CAAvB,CAAL,CAEEU,IAFF,CAEO,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAFV,EAGWF,IAHX,CAGgB,SAAAC,GAAG,QAAI,CAAA,MAAI,CAACrB,KAAL,CAAWV,KAAX,CAAiB+B,GAAG,CAACM,YAArB,CAAmCN,GAAG,CAACc,MAAvC,CAAJ,EAHnB,EAIG,C,mEAEsB,CACnB,KAAKlC,eAAL,CAAqBmC,KAArB,GACH,C,kDAuCYC,K,CAAO,CACtB,KAAKZ,QAAL,oBACEY,KAAK,CAACC,MAAN,CAAaC,IADf,CACsBF,KAAK,CAACC,MAAN,CAAaE,KADnC,GAGG,C,uCAEQ,CAEL,GAAMC,CAAAA,KAAK,CAAG,CACVC,SAAS,CAAE,QADD,CAEVC,SAAS,CAAE,MAFD,CAGVC,WAAW,CAAE,MAHH,CAIVC,YAAY,CAAE,MAJJ,CAAd,CAOA,GAAMC,CAAAA,SAAS,CAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,QAArB,CAA8B,YAA9B,CAAlB,CAEA,mBACI,2BAAK,SAAS,CAAC,KAAf,eACI,oBAAC,SAAD,MADJ,cAEI,oBAAC,MAAD,MAFJ,cAGI,oBAAC,MAAD,MAHJ,cAII,oBAAC,WAAD,EAAa,QAAQ,CAAI,KAAKlD,KAAL,CAAWgD,QAAX,CAAoBG,QAA7C,EAJJ,cAKI,2BAAK,KAAK,CAAEV,KAAZ,EACCK,SAAS,eAAI,yBAAG,KAAK,CAAI,CAACM,KAAK,CAAE,OAAR,CAAZ,eAA8B,2HAA9B,CADd,cAEA,oBAAC,UAAD,EACI,UAAU,CAAE,KAAK9C,KAAL,CAAWC,UAD3B,CAEI,aAAa,CAAE,KAAKD,KAAL,CAAWE,aAF9B,CAGI,YAAY,CAAE,KAAKyB,YAHvB,CAII,gBAAgB,CAAE,KAAK9B,gBAJ3B,EAFA,cAOA,yBAAG,KAAK,CAAI,CAACiD,KAAK,CAAE,KAAR,CAAeC,UAAU,CAAE,eAA3B,CAAZ,EAA0D,KAAK/C,KAAL,CAAWoB,SAArE,CAPA,CAQC,KAAKpB,KAAL,CAAWoB,SAAX,GAAyB,aAAzB,eACG,2BAAK,KAAK,CAAI,CAAC0B,KAAK,CAAE,OAAR,CAAd,eACI,2JADJ,cAEI,oHAAgE,oBAAC,OAAD,EAAS,EAAE,CAAG,sBAAd,UAAhE,KAFJ,CATJ,cAaA,8BAbA,cAcA,yBAAG,KAAK,CAAI,CAACA,KAAK,CAAE,OAAR,CAAiBC,UAAU,CAAE,eAA7B,CAAZ,uDAdA,cAeA,oBAAC,OAAD,EAAS,EAAE,CAAC,cAAZ,CAA2B,SAAS,CAAC,MAArC,CAA4C,WAAW,CAAE,CAACC,UAAU,CAAE,MAAb,CAAzD,mBAfA,CALJ,cAsBI,oBAAC,OAAD,MAtBJ,cAuBI,oBAAC,MAAD,MAvBJ,CADJ,CA4BH,C,uBA7GmBnE,KAAK,CAACoE,S,EAkH9B,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAlD,KAAK,CAAI,CAC7B,MAAO,CACLqB,YAAY,CAAErB,KAAK,CAACqB,YADf,CAEL8B,cAAc,CAAEnD,KAAK,CAACmD,cAFjB,CAAP,CAID,CALH,CAOE,GAAMC,CAAAA,kBAAkB,CAAG,CACzBpE,KAAK,CAAEA,KADkB,CAEzBC,MAAM,CAAEA,MAFiB,CAA3B,CAKF,cAAeF,CAAAA,OAAO,CAACmE,eAAD,CAAkBE,kBAAlB,CAAP,CAA8C3D,SAA9C,CAAf","sourcesContent":["import React from 'react';\nimport { NavLink } from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport { logIn, logOut } from '../redux/actions';\nimport '../App.css';\nimport SignInForm from '../components/SignInForm';\nimport Header from '../components/Header';\nimport NavBar from '../components/NavBar';\nimport AdSpace from '../components/AdSpace';\nimport UpperLine from '../components/UpperLine';\nimport Bottom from '../components/Bottom';\nimport BreadCrumbs from '../components/BreadCrumbs';\n\nclass LogInPage extends React.Component {\n\n    constructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            //loggedInUser: 'guest',\n\t\t\t//loggedInUserId: '',\n\t\t\tloginEmail: '',\n\t\t\tloginPassword: '',\n\t\t\tlogInText: ''\n\t\t};\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.handleClickLogIn = this.handleClickLogIn.bind(this);\n    }\n    \n    abortController = new AbortController();\n\tcomponentDidMount() {\n\t\tfetch('/api/sessionroutes', {\n            signal: this.abortController.signal})\n\t\t\t.then(res => res.json())\n            .then(res => this.props.logIn(res.loggedInUser, res.userId));\n    }\n\n    componentWillUnmount() {\n        this.abortController.abort();\n    }\n    \n\thandleClickLogIn = (e) => {\n        e.preventDefault();\n\t\tif(this.state.loginEmail !== '' &&\n\t\tthis.state.loginPassword !== '') {\n\t\t\tfetch('/api/loginroutes', {\n                signal: this.abortController.signal,\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Accept': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tenjoyer: {\n\t\t\t\t\t\temail: this.state.loginEmail,\n\t\t\t\t\t\tpassword: this.state.loginPassword\n                    },\n                    type: \"login\"\n\t\t\t\t})\n            }).then(res => res.json())\n                .then(result => {\n                    if(result.success === \"login sucessfull\") {\n                        //this.setState({loggedInUser: result.loggedInUser, loggedInUserId: result.uid, logInText:result.success})\n                        this.setState({logInText: result.success},() => this.props.logIn(result.loggedInUser, result.uid));\n                        this.props.history.push(\"/\");\n                    } else {\n                        this.setState({logInText:result.success})\n                    }\n                })\n\n        }else {console.log(\"LOGIN FAILED\"); this.setState({logInText: 'Napaka pri vnosu'})}\n        this.setState({\n            logInText:'',\n            loginEmail:'',\n\t\t\tloginPassword:'',\n        })\n    }\n    \n    handleChange(event) {\n\t\tthis.setState({\n\t\t\t[event.target.name]: event.target.value\n\t\t})\n    }\n\n    render() {\n\n        const style = {\n            textAlign: \"center\",\n            marginTop: \"10vh\",\n            paddingLeft: \"30vw\",\n            paddingRight: \"30vw\"\n        }\n\n        const confirmed = window.location.href.includes('?confirmed')\n\n        return (\n            <div className=\"App\">\n                <UpperLine/>\n                <Header/>\n                <NavBar/>\n                <BreadCrumbs pathname = {this.props.location.pathname}/>\n                <div style={style}>\n                {confirmed && <p style = {{color: 'white'}}><b>USPEŠNO STE POTRDILI SVOJ E-NASLOV! PRIJAVITE SE Z UPORABNIŠKIM IMENOM IN GESLOM.</b></p>}\n                <SignInForm\n                    loginEmail={this.state.loginEmail}\n                    loginPassword={this.state.loginPassword}\n                    handleChange={this.handleChange}\n                    handleClickLogIn={this.handleClickLogIn}/>\n                <p style = {{color: 'red', textShadow: '1px 1px black'}}>{this.state.logInText}</p>\n                {this.state.logInText === 'Unconfirmed' &&\n                    <div style = {{color: 'white'}}>\n                        <p>Vaš poštni naslov še ni potrjen. Preverite svoj poštni nabiralnik, vključno z vsiljeno pošto.</p>\n                        <p>Če niste dobili e-pošte ali pa je povezava potekla, kliknite <NavLink to = '/requestconfirmemail'>tukaj</NavLink>.</p>\n                    </div>}\n                <br/>\n                <p style = {{color: 'white', textShadow: '1px 1px black'}}>Še nimaš uporabniškega računa?</p>\n                <NavLink to=\"/signUp_page\" className=\"btnb\" activeStyle={{fontWeight: \"bold\"}}>REGISTRIRAJ SE</NavLink>\n                </div>\n                <AdSpace/>\n                <Bottom/>\n            </div>\n        );\n\n    }\n\n\n}\n\nconst mapStateToProps = state => {\n    return {\n      loggedInUser: state.loggedInUser,\n      loggedInUserId: state.loggedInUserId\n    };\n  };\n  \n  const mapDispatchToProps = {\n    logIn: logIn,\n    logOut: logOut\n  };\n\nexport default connect(mapStateToProps, mapDispatchToProps) (LogInPage);"]},"metadata":{},"sourceType":"module"}