{"ast":null,"code":"import _classCallCheck from\"/home/katni/REACT/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/katni/REACT/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/katni/REACT/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/katni/REACT/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{Redirect}from'react-router-dom';var SumForSeller=/*#__PURE__*/function(_React$Component){_inherits(SumForSeller,_React$Component);var _super=_createSuper(SumForSeller);function SumForSeller(props){var _this;_classCallCheck(this,SumForSeller);_this=_super.call(this,props);_this.abortController=new AbortController();_this.handleClickProceed=function(){fetch('/sessionorder',{signal:_this.abortController.signal,method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json'},body:JSON.stringify({type:1,ids:_this.props.ids})}).then(function(res){return res.json();}).then(function(res){if(res.available==='0'){_this.setState({fetching:false,available:false},function(){return console.log(_this.state);});}else{_this.setState({fetching:false},function(){return console.log(_this.state);});}}).catch(function(e){return console.error(\"Critical failure: \"+e.message);});};_this.state={fetching:true,available:true};return _this;}_createClass(SumForSeller,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.abortController.abort();}},{key:\"render\",value:function render(){var weight=this.props.sum.weight;var price=this.props.sum.price;var postage=weight<100?2:3;if(!this.state.fetching&&this.state.available){return/*#__PURE__*/React.createElement(Redirect,{to:\"/shoppingcart/placeorder\"});}else if(!this.state.available){return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:'rgb(255,255,255,0.8)',padding:'10px',margin:'0 auto',borderBottom:'10px solid black',borderTop:'2px dotted black'}},/*#__PURE__*/React.createElement(\"h3\",null,\"OPROSTITE, EDEN ALI VE\\u010C IZDELKOV NI VE\\u010C NA VOLJO\"));}else return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:'rgb(255,255,255,0.8)',padding:'10px',margin:'0 auto',borderBottom:'10px solid black',borderTop:'2px dotted black'}},/*#__PURE__*/React.createElement(\"h3\",null,\"Cena: \",price,\" \\u20AC\"),/*#__PURE__*/React.createElement(\"h4\",null,\"Po\\u0161tnina: \",postage,\" \\u20AC\"),/*#__PURE__*/React.createElement(\"h3\",null,\"Skupaj: \",price+postage,\" \\u20AC\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btnb\",onClick:this.handleClickProceed},\"NADALJUJ NA PLA\\u010CILO\"));}}]);return SumForSeller;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{loggedInUser:state.loggedInUser,loggedInUserId:state.loggedInUserId,order:state.order//TEGA V BISTVU NE RABIM\n};};export default connect(mapStateToProps)(SumForSeller);","map":{"version":3,"sources":["/home/katni/REACT/test-app/src/pages/ShoppingCart/SumForSeller.jsx"],"names":["React","connect","Redirect","SumForSeller","props","abortController","AbortController","handleClickProceed","fetch","signal","method","headers","body","JSON","stringify","type","ids","then","res","json","available","setState","fetching","console","log","state","catch","e","error","message","abort","weight","sum","price","postage","backgroundColor","padding","margin","borderBottom","borderTop","Component","mapStateToProps","loggedInUser","loggedInUserId","order"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport {Redirect} from 'react-router-dom';\n\nclass SumForSeller extends React.Component {\n\n    constructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            fetching: true,\n            available: true\n        };\n\n    }\n\n    abortController = new AbortController();\n\n    handleClickProceed = () => {\n        fetch('/sessionorder', {\n            signal: this.abortController.signal,\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            },\n            body: JSON.stringify({\n                type: 1,\n                ids: this.props.ids\n            })\n        }).then(res => res.json())\n        .then((res) => {if(res.available === '0') {this.setState({fetching: false, available: false}, () => console.log(this.state))}\n                        else {this.setState({fetching: false}, () => console.log(this.state))}})\n        .catch(e => console.error(\"Critical failure: \" + e.message));\n    }\n\n    componentWillUnmount() {\n        this.abortController.abort();\n    }\n\n    render() {\n        const weight = this.props.sum.weight;\n        const price = this.props.sum.price;\n        let postage = weight < 100 ? 2 : 3;\n    \n        if(!this.state.fetching && this.state.available) {\n            return <Redirect to = '/shoppingcart/placeorder'></Redirect>\n        }\n        else if(!this.state.available) {\n            return (\n            <div style = {{backgroundColor: 'rgb(255,255,255,0.8)', padding: '10px', margin: '0 auto', borderBottom: '10px solid black', borderTop: '2px dotted black'}}>\n                <h3>OPROSTITE, EDEN ALI VEČ IZDELKOV NI VEČ NA VOLJO</h3>\n            </div>\n            )\n        }\n        else return (\n            <div style = {{backgroundColor: 'rgb(255,255,255,0.8)', padding: '10px', margin: '0 auto', borderBottom: '10px solid black', borderTop: '2px dotted black'}}>\n                <h3>Cena: {price} €</h3>\n                <h4>Poštnina: {postage} €</h4>\n                <h3>Skupaj: {price + postage} €</h3>\n                <button className = 'btnb' onClick = {this.handleClickProceed}>NADALJUJ NA PLAČILO</button>\n            </div>\n        )\n    }\n\n}\n\nconst mapStateToProps = state => {\n    return {\n        loggedInUser: state.loggedInUser,\n        loggedInUserId: state.loggedInUserId,\n        order: state.order //TEGA V BISTVU NE RABIM\n    };\n  };\n  \nexport default connect(mapStateToProps) (SumForSeller);"]},"metadata":{},"sourceType":"module"}