{"ast":null,"code":"var _jsxFileName = \"/home/katja/REACT/test-app/src/pages/ShoppingCart/OrderPage.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { logIn, logOut } from '../../redux/actions';\nimport OrderListing from './OrderListing';\nimport UpperLine from '../../components/UpperLine';\nimport Header from '../../components/Header';\nimport Bottom from '../../components/Bottom';\nimport BreadCrumbs from '../../components/BreadCrumbs';\nimport NavBar from '../../components/NavBar';\nimport { NavLink } from 'react-router-dom';\n\nclass OrderPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.abortController = new AbortController();\n\n    this.cancelOrder = () => {\n      fetch('/orderroutes', {\n        signal: this.abortController.signal,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          type: 1,\n          ids: []\n        })\n      }).then(() => this.setState({\n        canceled: true\n      })).catch(e => console.error(\"Critical failure: \" + e.message));\n    };\n\n    this.removeFromCart = () => {\n      let cart = JSON.parse(window.localStorage.getItem(this.props.loggedInUserId));\n      const adIds = this.state.adIds;\n      adIds.forEach(adId => {\n        cart.splice(cart.indexOf(adId.toString()), 1);\n      });\n      window.localStorage.setItem(this.props.loggedInUserId, JSON.stringify(cart));\n    };\n\n    this.finishOrder = () => {\n      const price = this.priceSum(this.state.order, this.state.order.length);\n      const postage = this.postageSum(this.state.order, this.state.order.length);\n      fetch('/orderroutes', {\n        signal: this.abortController.signal,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          type: 3,\n          order: {\n            ids: this.state.adIds,\n            price: price,\n            postage: postage,\n            seller_id: this.state.order[0].user_id,\n            seller: this.state.order[0].username,\n            status: 1\n          }\n        })\n      }).then(res => res.json()).then(res => {\n        console.log(res.success);\n\n        if (res.success) {\n          this.setState({\n            finished: true\n          }, () => console.log(this.state));\n        } else {\n          this.setState({\n            finished: true,\n            error: true\n          }, () => console.log(this.state));\n        }\n\n        this.removeFromCart();\n      }).catch(e => console.error(\"Critical failure: \" + e.message));\n    };\n\n    this.handleOrder = () => {\n      this.setState({\n        orderStatus: 'ORDERED!'\n      });\n    };\n\n    this.priceSum = (order, n) => {\n      let price = 0;\n\n      for (let i = 0; i < n; i++) {\n        price += order[i].price;\n      }\n\n      return price;\n    };\n\n    this.postageSum = (order, n) => {\n      let weight = 0;\n      let postage = 0;\n\n      for (let i = 0; i < n; i++) {\n        weight += order[i].weight;\n      }\n\n      postage = weight / 100 + 1;\n      return postage;\n    };\n\n    this.state = {\n      orderStatus: '',\n      adIds: [],\n      order: [],\n      fetching: true,\n      canceled: false,\n      finished: false,\n      error: false\n    };\n  }\n\n  componentDidMount() {\n    fetch('/orderroutes', {\n      signal: this.abortController.signal,\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify({\n        type: 2\n      })\n    }).then(res => res.json()).then(res => {\n      const adIds = JSON.parse(res);\n      this.setState({\n        adIds\n      });\n      adIds.length && fetch('/cartListings', {\n        signal: this.abortController.signal,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify(adIds)\n      }).then(res => res.json()).then(res => {\n        this.setState({\n          order: res\n        });\n      }) //.then(res => console.log(res))\n      .catch(e => console.error(\"Critical failure: \" + e.message));\n    }).catch(e => console.error(\"Critical failure: \" + e.message));\n  }\n\n  componentWillUnmount() {\n    this.abortController.abort();\n  }\n\n  render() {\n    const order = this.state.order;\n    const n = order.length;\n    const price = this.priceSum(order, n);\n    const postage = this.postageSum(order, n);\n\n    if (!this.state.order.length) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(UpperLine, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(NavBar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(BreadCrumbs, {\n        pathname: this.props.location.pathname,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          backgroundColor: 'rgb(255,255,255,0.7)',\n          margin: '0 auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }\n      }, \"O NE! NEKAJ JE \\u0160LO NAROBE. \"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btnb\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        exact: true,\n        to: \"/shoppingcart\",\n        style: {\n          color: 'black',\n          textDecoration: 'none'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 48\n        }\n      }, \"NAZAJ NA KO\\u0160ARICO\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(Bottom, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }\n      }));\n    } else if (n && !this.state.canceled && !this.state.finished) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(UpperLine, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(NavBar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(BreadCrumbs, {\n        pathname: this.props.location.pathname,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          padding: '30px',\n          margin: '0 auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          backgroundColor: 'rgb(255,255,255,0.7)',\n          margin: '0 auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }\n      }), this.state.order.map(item => /*#__PURE__*/React.createElement(OrderListing, {\n        key: item.ad_id,\n        description: item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 51\n        }\n      })), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 25\n        }\n      }, \"Cena: \", price, \" \\u20AC\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 25\n        }\n      }, \"Cena po\\u0161tnine: \", postage, \" \\u20AC\"), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 25\n        }\n      }, \"Skupaj: \", price + postage, \" \\u20AC\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btnb\",\n        onClick: this.finishOrder,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 25\n        }\n      }, \"ZAKLJU\\u010CI NARO\\u010CILO\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btnb\",\n        onClick: this.cancelOrder,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 25\n        }\n      }, \"PREKLI\\u010CI NARO\\u010CILO\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 25\n        }\n      }, this.state.orderStatus)), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }\n      }))), /*#__PURE__*/React.createElement(Bottom, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }\n      }));\n    } else if (this.state.canceled && !this.state.finished) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(UpperLine, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(NavBar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(BreadCrumbs, {\n        pathname: this.props.location.pathname,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          backgroundColor: 'rgb(255,255,255,0.7)',\n          margin: '0 auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 29\n        }\n      }, \"NARO\\u010CILO PREKLICANO!\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btnb\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        exact: true,\n        to: \"/shoppingcart\",\n        style: {\n          color: 'black',\n          textDecoration: 'none'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 56\n        }\n      }, \"NAZAJ NA KO\\u0160ARICO\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(Bottom, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 25\n        }\n      }));\n    } else if (this.state.finished && !this.state.canceled) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(UpperLine, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(NavBar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(BreadCrumbs, {\n        pathname: this.props.location.pathname,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          backgroundColor: 'rgb(255,255,255,0.7)',\n          margin: '0 auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 17\n        }\n      }), !this.state.error && /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 39\n        }\n      }, \"NARO\\u010CILO ZAKLJU\\u010CENO!\"), this.state.error && /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 38\n        }\n      }, \"NAPAKA! EDEN ALI VE\\u010C IZDELKOV \\u017DAL NI VE\\u010C NA VOLJO!\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btnb\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        exact: true,\n        to: \"/\",\n        style: {\n          color: 'black',\n          textDecoration: 'none'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 44\n        }\n      }, \"DOMOV\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(Bottom, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(UpperLine, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(NavBar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(BreadCrumbs, {\n        pathname: this.props.location.pathname,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(Bottom, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 25\n        }\n      }));\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    loggedInUser: state.loggedInUser,\n    loggedInUserId: state.loggedInUserId\n  };\n};\n\nconst mapDispatchToProps = {\n  logIn: logIn,\n  logOut: logOut\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(OrderPage);","map":{"version":3,"sources":["/home/katja/REACT/test-app/src/pages/ShoppingCart/OrderPage.jsx"],"names":["React","connect","logIn","logOut","OrderListing","UpperLine","Header","Bottom","BreadCrumbs","NavBar","NavLink","OrderPage","Component","constructor","props","abortController","AbortController","cancelOrder","fetch","signal","method","headers","body","JSON","stringify","type","ids","then","setState","canceled","catch","e","console","error","message","removeFromCart","cart","parse","window","localStorage","getItem","loggedInUserId","adIds","state","forEach","adId","splice","indexOf","toString","setItem","finishOrder","price","priceSum","order","length","postage","postageSum","seller_id","user_id","seller","username","status","res","json","log","success","finished","handleOrder","orderStatus","n","i","weight","fetching","componentDidMount","componentWillUnmount","abort","render","location","pathname","backgroundColor","margin","color","textDecoration","padding","map","item","ad_id","fontWeight","mapStateToProps","loggedInUser","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { logIn, logOut } from '../../redux/actions';\nimport OrderListing from './OrderListing';\nimport UpperLine from '../../components/UpperLine';\nimport Header from '../../components/Header';\nimport Bottom from '../../components/Bottom';\nimport BreadCrumbs from '../../components/BreadCrumbs';\nimport NavBar from '../../components/NavBar';\nimport { NavLink } from 'react-router-dom';\n\n\nclass OrderPage extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            orderStatus: '',\n            adIds: [],\n            order: [],\n            fetching: true,\n            canceled: false,\n            finished: false,\n            error: false\n        };\n    }\n\n    abortController = new AbortController();\n\n    componentDidMount() {\n        fetch('/orderroutes', {\n            signal: this.abortController.signal,\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            },\n            body: JSON.stringify({\n                type: 2,\n            })\n        }).then(res => res.json())\n            .then(res => { const adIds = JSON.parse(res); this.setState({adIds});\n                (adIds.length) && fetch('/cartListings', {\n                                    signal: this.abortController.signal,\n                                    method: 'POST',\n                                    headers: {\n                                        'Content-Type': 'application/json',\n                                        'Accept': 'application/json'\n                                    },\n                                    body: JSON.stringify(adIds)\n                                }).then(res => res.json())\n                                    .then(res => {this.setState({order: res})})\n                                    //.then(res => console.log(res))\n                                    .catch(e => console.error(\"Critical failure: \" + e.message));})\n            .catch(e => console.error(\"Critical failure: \" + e.message));\n    }\n\n    cancelOrder = () => {\n        fetch('/orderroutes', {\n            signal: this.abortController.signal,\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            },\n            body: JSON.stringify({\n                type: 1,\n                ids: []\n            })\n        }).then(() => this.setState({canceled: true}))\n        .catch(e => console.error(\"Critical failure: \" + e.message));\n    }\n\n    removeFromCart = () => {\n        let cart = JSON.parse(window.localStorage.getItem(this.props.loggedInUserId));\n        const adIds = this.state.adIds;\n        adIds.forEach(adId => {\n            cart.splice(cart.indexOf(adId.toString()), 1);\n        })\n        window.localStorage.setItem(this.props.loggedInUserId, JSON.stringify(cart));\n    }\n\n    finishOrder = () => {\n        const price = this.priceSum(this.state.order, this.state.order.length);\n        const postage = this.postageSum(this.state.order, this.state.order.length);\n        fetch('/orderroutes', {\n            signal: this.abortController.signal,\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            },\n            body: JSON.stringify({\n                type: 3,\n                order: {\n                    ids: this.state.adIds,\n                    price: price,\n                    postage: postage,\n                    seller_id: this.state.order[0].user_id,\n                    seller: this.state.order[0].username,\n                    status: 1\n                }\n\n            })\n        }).then(res => res.json())\n        .then(res => {console.log(res.success); if (res.success) {this.setState({finished: true}, () => console.log(this.state));} else {this.setState({finished: true, error: true}, () => console.log(this.state));}\n                        this.removeFromCart();})\n        .catch(e => console.error(\"Critical failure: \" + e.message));\n    }\n\n    componentWillUnmount() {\n        this.abortController.abort();\n    }\n\n    handleOrder = () => {\n        this.setState({orderStatus: 'ORDERED!'});\n    }\n\n    priceSum = (order, n) => {\n        let price = 0;\n        for (let i = 0; i < n; i++) {\n            price += order[i].price;\n        }\n        return price;\n    }\n    postageSum = (order, n) => {\n        let weight = 0;\n        let postage = 0;\n        for (let i = 0; i < n; i++) {\n            weight += order[i].weight;\n        }\n        postage = weight/100 +1;\n        return postage;\n    }\n\n    render() {\n        const order = this.state.order;\n        const n = order.length;\n\n        const price = this.priceSum(order, n);\n        const postage = this.postageSum(order, n);\n\n        if (!this.state.order.length) {\n            return <div className=\"App\">\n                <UpperLine/>\n                <Header/>\n                <NavBar/>\n                <BreadCrumbs pathname = {this.props.location.pathname}/>\n                <div style = {{backgroundColor: 'rgb(255,255,255,0.7)', margin:'0 auto'}}>\n                    <br/>\n                    <h1>O NE! NEKAJ JE ŠLO NAROBE. </h1>\n                    <button className = 'btnb'><NavLink exact to = '/shoppingcart' style={{color:'black', textDecoration:'none'}}>NAZAJ NA KOŠARICO</NavLink></button>\n                    <br/>\n                </div>\n            <Bottom/>\n        </div>   \n        }\n        else if (n && !this.state.canceled && !this.state.finished) {\n            return <div className=\"App\">\n            <UpperLine/>\n            <Header/>\n            <NavBar/>\n            <BreadCrumbs pathname = {this.props.location.pathname}/>\n            <div style = {{padding: '30px', margin: '0 auto'}}>\n                <div style = {{backgroundColor: 'rgb(255,255,255,0.7)', margin:'0 auto'}}>\n                    <br/>\n                    {this.state.order.map(item => <OrderListing key ={item.ad_id} description = {item}/>)}\n                    <br/>\n                    <div>\n                        <p>Cena: {price} €</p>\n                        <p>Cena poštnine: {postage} €</p>\n                        <p style = {{fontWeight: 'bold'}}>Skupaj: {price + postage} €</p>\n                        <button className = 'btnb' onClick = {this.finishOrder}>ZAKLJUČI NAROČILO</button>\n                        <button className = 'btnb' onClick = {this.cancelOrder}>PREKLIČI NAROČILO</button>\n                        <br/>\n                        <p>{this.state.orderStatus}</p>\n                    </div>\n                    <br/>\n                </div>\n            </div>\n            <Bottom/>\n        </div>   \n        }\n        else if (this.state.canceled && !this.state.finished) {\n            return <div className=\"App\">\n                        <UpperLine/>\n                        <Header/>\n                        <NavBar/>\n                        <BreadCrumbs pathname = {this.props.location.pathname}/>\n                        <div style = {{backgroundColor: 'rgb(255,255,255,0.7)', margin:'0 auto'}}>\n                            <br/>\n                            <h1>NAROČILO PREKLICANO!</h1>\n                            <button className = 'btnb'><NavLink exact to = '/shoppingcart' style={{color:'black', textDecoration:'none'}}>NAZAJ NA KOŠARICO</NavLink></button>\n                            <br/>\n                        </div>\n                        <Bottom/>\n                    </div>\n        }\n        else if (this.state.finished && !this.state.canceled) {\n            return <div className=\"App\">\n            <UpperLine/>\n            <Header/>\n            <NavBar/>\n            <BreadCrumbs pathname = {this.props.location.pathname}/>\n            <div style = {{backgroundColor: 'rgb(255,255,255,0.7)', margin:'0 auto'}}>\n                <br/>\n                {!this.state.error && <h1>NAROČILO ZAKLJUČENO!</h1>}\n                {this.state.error && <h1>NAPAKA! EDEN ALI VEČ IZDELKOV ŽAL NI VEČ NA VOLJO!</h1>}\n                <button className = 'btnb'><NavLink exact to = '/' style={{color:'black', textDecoration:'none'}}>DOMOV</NavLink></button>\n                <br/>\n            </div>\n            <Bottom/>\n        </div>\n        }\n        else { return <div className=\"App\">\n                        <UpperLine/>\n                        <Header/>\n                        <NavBar/>\n                        <BreadCrumbs pathname = {this.props.location.pathname}/>\n                        <div>\n                            <br/>\n                            <br/>\n                        </div>\n                        <Bottom/>\n                    </div>\n                }\n    }\n    \n}\n\nconst mapStateToProps = state => {\n    return {\n      loggedInUser: state.loggedInUser,\n      loggedInUserId: state.loggedInUserId\n    };\n  };\n  \n  const mapDispatchToProps = {\n    logIn: logIn,\n    logOut: logOut\n  };\n\nexport default connect(mapStateToProps, mapDispatchToProps) (OrderPage);\n"]},"metadata":{},"sourceType":"module"}