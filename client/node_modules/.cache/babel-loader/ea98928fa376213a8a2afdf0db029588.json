{"ast":null,"code":"var _jsxFileName = \"/home/katja/REACT/test-app/src/pages/Listing/ItemDescription.jsx\";\nimport React from 'react';\nimport { ReCaptcha } from 'react-recaptcha-google';\nimport { NavLink } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { saveAtt } from '../../redux/actions';\nimport Popup from 'reactjs-popup';\nimport '../../App.css';\n\nclass ItemDescription extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addToCart = () => {\n      if (this.props.loggedInUserId !== '0') {\n        //this.props.addToCart(this.props.adId);\n        let cart = JSON.parse(window.localStorage.getItem(this.props.loggedInUserId));\n\n        if (cart !== null) {\n          if (cart.includes(this.props.adId)) {\n            this.setState({\n              addingResult: 'IZDELEK JE ŽE V KOŠARICI!'\n            });\n          } else {\n            cart.push(this.props.adId);\n            window.localStorage.setItem(this.props.loggedInUserId, JSON.stringify(cart));\n            this.setState({\n              addingResult: 'IZDELEK DODAN V KOŠARICO!'\n            });\n          }\n        } else {\n          let initialCart = [];\n          initialCart.push(this.props.adId);\n          window.localStorage.setItem(this.props.loggedInUserId, JSON.stringify(initialCart));\n          this.setState({\n            addingResult: 'IZDELEK DODAN V KOŠARICO!'\n          });\n        }\n      } else {\n        this.setState({\n          addingResult: 'ZA DODAJANJE V KOŠARICO SE PRIJAVITE.'\n        });\n      }\n    };\n\n    this.removeFromCart = () => {\n      let cart = JSON.parse(window.localStorage.getItem(this.props.loggedInUserId));\n\n      if (cart !== null) {\n        cart.splice(cart.indexOf(this.props.adId), 1);\n        window.localStorage.setItem(this.props.loggedInUserId, JSON.stringify(cart));\n      } //console.log('INDEX IN CART: ' + cart.indexOf(this.props.adId))\n\n    };\n\n    this.showCart = () => {\n      //window.localStorage.clear();\n      console.log(JSON.parse(window.localStorage.getItem(this.props.loggedInUserId)));\n    };\n\n    this.handleMsgRequest = () => {\n      this.setState({\n        msgRequest: true\n      });\n    };\n\n    this.handleConfirm = () => {};\n\n    this.proceedToMsg = () => {\n      console.log(\"SUBMITTED!\");\n      this.setState({\n        msgRequest: false\n      });\n    };\n\n    this.descriptDiv = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }\n      }, subcategory), categ !== 'kids' && /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 38\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 41\n        }\n      }, \"Velikost: \"), selection.clothsize.label), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 20\n        }\n      }, \"Material: \"), selection.material.label), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 20\n        }\n      }, \"Stanje: \"), selection.condition.label), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 20\n        }\n      }, \"Znamka: \"), selection.brand.value), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 20\n        }\n      }, \"Opis: \"), selection.descrtext.value), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 20\n        }\n      }, \"Cena: \"), selection.price.value, \" \\u20AC\"), this.props.status === 'active' && this.props.loggedInUserId !== '0' && /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btnb\",\n        onClick: this.addToCart,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 91\n        }\n      }, \"DODAJ V KO\\u0160ARICO\"), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }\n      }, this.state.addingResult), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }\n      }, \"Prodajalec: \", this.props.seller, \" \"), /*#__PURE__*/React.createElement(NavLink, {\n        className: \"btnu\",\n        exact: true,\n        to: '/sellerlistings?' + this.props.sellerId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }\n      }, \"Vsi oglasi tega prodajalca\"), this.props.loggedInUserId !== '0' && this.props.loggedInUserId !== this.props.sellerId && /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontSize: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 110\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        style: btnContStyle,\n        onClick: this.handleMsgRequest,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }\n      }, \"Kontaktiraj prodajalca\")));\n    };\n\n    this.state = {\n      addingResult: '',\n      msgRequest: false,\n      buttonDisabled: true\n    };\n    this.onLoadRecaptcha = this.onLoadRecaptcha.bind(this);\n    this.verifyCallback = this.verifyCallback.bind(this);\n  }\n\n  componentDidMount() {\n    const script = document.createElement(\"script\");\n    script.src = \"https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit\";\n    script.async = true;\n    document.body.appendChild(script);\n\n    if (this.captchaDemo) {\n      console.log(\"started, just a second...\");\n      this.captchaDemo.reset();\n    }\n  } //TREBA JE UREDITI BRISANJE IZ LOCAL STOREGA; POTEM KO SE NAROČI IN/ALI PO POTEKU DOLOČENEGA ČASA\n\n\n  onLoadRecaptcha() {\n    if (this.captchaDemo) {\n      this.captchaDemo.reset();\n    }\n  }\n\n  verifyCallback(recaptchaToken) {\n    if (recaptchaToken) {\n      this.setState({\n        buttonDisabled: false\n      });\n    }\n  }\n\n  render() {\n    const selection = this.props.selection;\n    let subcategory = '';\n    const categ = selection.category.value;\n\n    switch (categ) {\n      case 'women':\n        subcategory = selection.women.label;\n        break;\n\n      case 'men':\n        subcategory = selection.men.label;\n        break;\n\n      case 'kids':\n        subcategory = selection.kids.label;\n        break;\n\n      default:\n        subcategory = '';\n        break;\n    }\n\n    const btnContStyle = {\n      backgroundColor: 'rgb(255,255,255,0)',\n      border: 'none',\n      margin: 0,\n      padding: 0,\n      fontSize: 'small',\n      textDecoration: 'underline',\n      color: 'grey',\n      cursor: 'pointer'\n    };\n\n    if (!this.state.msgRequest) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 17\n        }\n      }, this.descriptDiv());\n    } else return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Popup, {\n      open: true,\n      position: \"center center\",\n      onClose: this.closeModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        height: '90px',\n        lineHeight: '90px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(ReCaptcha, {\n      ref: el => {\n        this.captchaDemo = el;\n      },\n      size: \"normal\",\n      \"data-theme\": \"dark\",\n      render: \"explicit\",\n      sitekey: \"6LcVy-0UAAAAAA1SYgeXX6tUze_gLa6Tplcris-V\",\n      onloadCallback: this.onLoadRecaptcha,\n      verifyCallback: this.verifyCallback,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 25\n      }\n    }), this.state.buttonDisabled && /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        paddingLeft: '20px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 55\n      }\n    }, \"NADALJUJ\"), !this.state.buttonDisabled && /*#__PURE__*/React.createElement(NavLink, {\n      style: {\n        paddingLeft: '20px'\n      },\n      onClick: this.proceedToMsg,\n      exact: true,\n      to: '/chatpage/conversation?' + this.props.sellerId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 56\n      }\n    }, \"NADALJUJ\"))), this.descriptDiv());\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    loggedInUser: state.loggedInUser,\n    loggedInUserId: state.loggedInUserId\n  };\n};\n\nconst mapDispatchToProps = {\n  saveAtt: saveAtt\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ItemDescription);","map":{"version":3,"sources":["/home/katja/REACT/test-app/src/pages/Listing/ItemDescription.jsx"],"names":["React","ReCaptcha","NavLink","connect","saveAtt","Popup","ItemDescription","Component","constructor","props","addToCart","loggedInUserId","cart","JSON","parse","window","localStorage","getItem","includes","adId","setState","addingResult","push","setItem","stringify","initialCart","removeFromCart","splice","indexOf","showCart","console","log","handleMsgRequest","msgRequest","handleConfirm","proceedToMsg","descriptDiv","subcategory","categ","selection","clothsize","label","material","condition","brand","value","descrtext","price","status","fontWeight","state","seller","sellerId","fontSize","btnContStyle","buttonDisabled","onLoadRecaptcha","bind","verifyCallback","componentDidMount","script","document","createElement","src","async","body","appendChild","captchaDemo","reset","recaptchaToken","render","category","women","men","kids","backgroundColor","border","margin","padding","textDecoration","color","cursor","closeModal","display","justifyContent","height","lineHeight","el","paddingLeft","mapStateToProps","loggedInUser","mapDispatchToProps"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,wBAA1B;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAO,eAAP;;AAEA,MAAMC,eAAN,SAA8BN,KAAK,CAACO,SAApC,CAA8C;AAE1CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACrB,UAAMA,KAAN;;AADqB,SAyBnBC,SAzBmB,GAyBP,MAAM;AACd,UAAG,KAAKD,KAAL,CAAWE,cAAX,KAA8B,GAAjC,EAAsC;AAClC;AACA,YAAIC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,KAAKR,KAAL,CAAWE,cAAvC,CAAX,CAAX;;AACA,YAAIC,IAAI,KAAK,IAAb,EAAmB;AACf,cAAGA,IAAI,CAACM,QAAL,CAAc,KAAKT,KAAL,CAAWU,IAAzB,CAAH,EAAmC;AAC/B,iBAAKC,QAAL,CAAc;AAACC,cAAAA,YAAY,EAAE;AAAf,aAAd;AACH,WAFD,MAEM;AACFT,YAAAA,IAAI,CAACU,IAAL,CAAU,KAAKb,KAAL,CAAWU,IAArB;AACAJ,YAAAA,MAAM,CAACC,YAAP,CAAoBO,OAApB,CAA4B,KAAKd,KAAL,CAAWE,cAAvC,EAAuDE,IAAI,CAACW,SAAL,CAAeZ,IAAf,CAAvD;AACA,iBAAKQ,QAAL,CAAc;AAACC,cAAAA,YAAY,EAAE;AAAf,aAAd;AACH;AACJ,SARD,MAQO;AACH,cAAII,WAAW,GAAG,EAAlB;AACAA,UAAAA,WAAW,CAACH,IAAZ,CAAiB,KAAKb,KAAL,CAAWU,IAA5B;AACAJ,UAAAA,MAAM,CAACC,YAAP,CAAoBO,OAApB,CAA4B,KAAKd,KAAL,CAAWE,cAAvC,EAAuDE,IAAI,CAACW,SAAL,CAAeC,WAAf,CAAvD;AACA,eAAKL,QAAL,CAAc;AAACC,YAAAA,YAAY,EAAE;AAAf,WAAd;AACH;AACJ,OAjBD,MAiBK;AAAC,aAAKD,QAAL,CAAc;AAACC,UAAAA,YAAY,EAAE;AAAf,SAAd;AAAwE;AACjF,KA5CkB;;AAAA,SA8CnBK,cA9CmB,GA8CF,MAAM;AACnB,UAAId,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,KAAKR,KAAL,CAAWE,cAAvC,CAAX,CAAX;;AACA,UAAIC,IAAI,KAAK,IAAb,EAAmB;AACfA,QAAAA,IAAI,CAACe,MAAL,CAAYf,IAAI,CAACgB,OAAL,CAAa,KAAKnB,KAAL,CAAWU,IAAxB,CAAZ,EAA2C,CAA3C;AACAJ,QAAAA,MAAM,CAACC,YAAP,CAAoBO,OAApB,CAA4B,KAAKd,KAAL,CAAWE,cAAvC,EAAuDE,IAAI,CAACW,SAAL,CAAeZ,IAAf,CAAvD;AACH,OALkB,CAMnB;;AACH,KArDkB;;AAAA,SAuDnBiB,QAvDmB,GAuDR,MAAM;AACb;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYlB,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,KAAKR,KAAL,CAAWE,cAAvC,CAAX,CAAZ;AACH,KA1DkB;;AAAA,SA4DnBqB,gBA5DmB,GA4DA,MAAM;AACrB,WAAKZ,QAAL,CAAc;AAACa,QAAAA,UAAU,EAAE;AAAb,OAAd;AACH,KA9DkB;;AAAA,SAgEnBC,aAhEmB,GAgEH,MAAM,CAErB,CAlEkB;;AAAA,SA+EnBC,YA/EmB,GA+EJ,MAAM;AACjBL,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,WAAKX,QAAL,CAAc;AAACa,QAAAA,UAAU,EAAE;AAAb,OAAd;AACH,KAlFkB;;AAAA,SAoFnBG,WApFmB,GAoFL,MAAM;AAChB,0BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKC,WAAL,CADJ,EAEKC,KAAK,KAAK,MAAV,iBAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAH,EAAqBC,SAAS,CAACC,SAAV,CAAoBC,KAAzC,CAFzB,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAH,EAAqBF,SAAS,CAACG,QAAV,CAAmBD,KAAxC,CAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAH,EAAmBF,SAAS,CAACI,SAAV,CAAoBF,KAAvC,CAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAH,EAAmBF,SAAS,CAACK,KAAV,CAAgBC,KAAnC,CALJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAH,EAAiBN,SAAS,CAACO,SAAV,CAAoBD,KAArC,CANJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPJ,eAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAH,EAAiBN,SAAS,CAACQ,KAAV,CAAgBF,KAAjC,YARJ,EASM,KAAKpC,KAAL,CAAWuC,MAAX,KAAsB,QAAtB,IAAkC,KAAKvC,KAAL,CAAWE,cAAX,KAA8B,GAAjE,iBAAyE;AAAQ,QAAA,SAAS,EAAG,MAApB;AAA2B,QAAA,OAAO,EAAI,KAAKD,SAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAT9E,eAUI;AAAG,QAAA,KAAK,EAAI;AAACuC,UAAAA,UAAU,EAAE;AAAb,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmC,KAAKC,KAAL,CAAW7B,YAA9C,CAVJ,eAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAXJ,eAYI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAgB,KAAKZ,KAAL,CAAW0C,MAA3B,MAZJ,eAaI,oBAAC,OAAD;AAAS,QAAA,SAAS,EAAC,MAAnB;AAA0B,QAAA,KAAK,MAA/B;AAAgC,QAAA,EAAE,EAAE,qBAAqB,KAAK1C,KAAL,CAAW2C,QAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAbJ,EAcM,KAAK3C,KAAL,CAAWE,cAAX,KAA8B,GAA9B,IAAqC,KAAKF,KAAL,CAAWE,cAAX,KAA8B,KAAKF,KAAL,CAAW2C,QAA/E,iBAA4F;AAAG,QAAA,KAAK,EAAI;AAACC,UAAAA,QAAQ,EAAE;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAC7F;AAAQ,QAAA,KAAK,EAAIC,YAAjB;AAA+B,QAAA,OAAO,EAAI,KAAKtB,gBAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAD6F,CAdjG,CADJ;AAmBH,KAxGkB;;AAErB,SAAKkB,KAAL,GAAa;AACH7B,MAAAA,YAAY,EAAE,EADX;AAEHY,MAAAA,UAAU,EAAE,KAFT;AAGHsB,MAAAA,cAAc,EAAE;AAHb,KAAb;AAKM,SAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAtB;AACH;;AAEDE,EAAAA,iBAAiB,GAAG;AAEhB,UAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAF,IAAAA,MAAM,CAACG,GAAP,GAAa,+EAAb;AACAH,IAAAA,MAAM,CAACI,KAAP,GAAe,IAAf;AACAH,IAAAA,QAAQ,CAACI,IAAT,CAAcC,WAAd,CAA0BN,MAA1B;;AAEA,QAAI,KAAKO,WAAT,EAAsB;AAClBrC,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACA,WAAKoC,WAAL,CAAiBC,KAAjB;AACH;AACF,GAxBuC,CA0B1C;;;AA4CAZ,EAAAA,eAAe,GAAG;AACd,QAAI,KAAKW,WAAT,EAAsB;AAClB,WAAKA,WAAL,CAAiBC,KAAjB;AACH;AACJ;;AACDV,EAAAA,cAAc,CAACW,cAAD,EAAiB;AAC7B,QAAGA,cAAH,EAAmB;AACjB,WAAKjD,QAAL,CAAc;AAACmC,QAAAA,cAAc,EAAE;AAAjB,OAAd;AACD;AACF;;AA6BDe,EAAAA,MAAM,GAAG;AAEL,UAAM/B,SAAS,GAAG,KAAK9B,KAAL,CAAW8B,SAA7B;AACA,QAAIF,WAAW,GAAG,EAAlB;AACA,UAAMC,KAAK,GAAGC,SAAS,CAACgC,QAAV,CAAmB1B,KAAjC;;AAEA,YAAOP,KAAP;AACI,WAAK,OAAL;AACID,QAAAA,WAAW,GAAGE,SAAS,CAACiC,KAAV,CAAgB/B,KAA9B;AACA;;AACJ,WAAK,KAAL;AACIJ,QAAAA,WAAW,GAAGE,SAAS,CAACkC,GAAV,CAAchC,KAA5B;AACA;;AACJ,WAAK,MAAL;AACIJ,QAAAA,WAAW,GAAGE,SAAS,CAACmC,IAAV,CAAejC,KAA7B;AACA;;AACJ;AACIJ,QAAAA,WAAW,GAAG,EAAd;AACA;AAZR;;AAeA,UAAMiB,YAAY,GAAG;AACjBqB,MAAAA,eAAe,EAAE,oBADA;AAEjBC,MAAAA,MAAM,EAAE,MAFS;AAGjBC,MAAAA,MAAM,EAAE,CAHS;AAIjBC,MAAAA,OAAO,EAAE,CAJQ;AAKjBzB,MAAAA,QAAQ,EAAE,OALO;AAMjB0B,MAAAA,cAAc,EAAE,WANC;AAOjBC,MAAAA,KAAK,EAAE,MAPU;AAQjBC,MAAAA,MAAM,EAAE;AARS,KAArB;;AAWA,QAAG,CAAC,KAAK/B,KAAL,CAAWjB,UAAf,EAA2B;AACvB,0BACI;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKG,WAAL,EADL,CADJ;AAKH,KAND,MAOK,oBACD;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAI,IAAf;AACI,MAAA,QAAQ,EAAG,eADf;AAEI,MAAA,OAAO,EAAE,KAAK8C,UAFlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGI;AAAK,MAAA,KAAK,EAAI;AAACC,QAAAA,OAAO,EAAE,MAAV;AAAkBC,QAAAA,cAAc,EAAE,QAAlC;AAA4CC,QAAAA,MAAM,EAAE,MAApD;AAA4DC,QAAAA,UAAU,EAAE;AAAxE,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,SAAD;AACI,MAAA,GAAG,EAAGC,EAAD,IAAQ;AAAC,aAAKpB,WAAL,GAAmBoB,EAAnB;AAAuB,OADzC;AAEI,MAAA,IAAI,EAAC,QAFT;AAGI,oBAAW,MAHf;AAII,MAAA,MAAM,EAAC,UAJX;AAKI,MAAA,OAAO,EAAC,0CALZ;AAMI,MAAA,cAAc,EAAE,KAAK/B,eANzB;AAOI,MAAA,cAAc,EAAE,KAAKE,cAPzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAUK,KAAKR,KAAL,CAAWK,cAAX,iBAA6B;AAAM,MAAA,KAAK,EAAI;AAACiC,QAAAA,WAAW,EAAE;AAAd,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAVlC,EAWK,CAAC,KAAKtC,KAAL,CAAWK,cAAZ,iBAA8B,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAI;AAACiC,QAAAA,WAAW,EAAE;AAAd,OAAlB;AAAyC,MAAA,OAAO,EAAG,KAAKrD,YAAxD;AAAsE,MAAA,KAAK,MAA3E;AAA4E,MAAA,EAAE,EAAI,4BAA4B,KAAK1B,KAAL,CAAW2C,QAAzH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXnC,CAHJ,CADJ,EAkBK,KAAKhB,WAAL,EAlBL,CADC;AAsBR;;AAzKyC;;AA4K9C,MAAMqD,eAAe,GAAGvC,KAAK,IAAI;AAC7B,SAAO;AACLwC,IAAAA,YAAY,EAAExC,KAAK,CAACwC,YADf;AAEL/E,IAAAA,cAAc,EAAEuC,KAAK,CAACvC;AAFjB,GAAP;AAIH,CALD;;AAOA,MAAMgF,kBAAkB,GAAG;AACvBvF,EAAAA,OAAO,EAAEA;AADc,CAA3B;AAIA,eAAeD,OAAO,CAACsF,eAAD,EAAkBE,kBAAlB,CAAP,CAA8CrF,eAA9C,CAAf","sourcesContent":["import React from 'react';\nimport { ReCaptcha } from 'react-recaptcha-google'\nimport { NavLink } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { saveAtt } from '../../redux/actions';\nimport Popup from 'reactjs-popup';\nimport '../../App.css';\n\nclass ItemDescription extends React.Component {\n\n    constructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            addingResult: '',\n            msgRequest: false,\n            buttonDisabled: true\n        };\n        this.onLoadRecaptcha = this.onLoadRecaptcha.bind(this);\n        this.verifyCallback = this.verifyCallback.bind(this);\n    }\n\n    componentDidMount() {\n\n        const script = document.createElement(\"script\");\n        script.src = \"https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit\";\n        script.async = true;\n        document.body.appendChild(script);\n\n        if (this.captchaDemo) {\n            console.log(\"started, just a second...\")\n            this.captchaDemo.reset();\n        }\n      }\n\n    //TREBA JE UREDITI BRISANJE IZ LOCAL STOREGA; POTEM KO SE NAROČI IN/ALI PO POTEKU DOLOČENEGA ČASA\n    addToCart = () => {\n        if(this.props.loggedInUserId !== '0') {\n            //this.props.addToCart(this.props.adId);\n            let cart = JSON.parse(window.localStorage.getItem(this.props.loggedInUserId));\n            if (cart !== null) {\n                if(cart.includes(this.props.adId)) {\n                    this.setState({addingResult: 'IZDELEK JE ŽE V KOŠARICI!'});\n                }else {\n                    cart.push(this.props.adId);\n                    window.localStorage.setItem(this.props.loggedInUserId, JSON.stringify(cart));\n                    this.setState({addingResult: 'IZDELEK DODAN V KOŠARICO!'});\n                }\n            } else {\n                let initialCart = [];\n                initialCart.push(this.props.adId);\n                window.localStorage.setItem(this.props.loggedInUserId, JSON.stringify(initialCart));\n                this.setState({addingResult: 'IZDELEK DODAN V KOŠARICO!'});\n            }\n        }else{this.setState({addingResult: 'ZA DODAJANJE V KOŠARICO SE PRIJAVITE.'});}\n    }\n\n    removeFromCart = () => {\n        let cart = JSON.parse(window.localStorage.getItem(this.props.loggedInUserId));\n        if (cart !== null) {\n            cart.splice(cart.indexOf(this.props.adId), 1);\n            window.localStorage.setItem(this.props.loggedInUserId, JSON.stringify(cart));\n        }\n        //console.log('INDEX IN CART: ' + cart.indexOf(this.props.adId))\n    }\n\n    showCart = () => {\n        //window.localStorage.clear();\n        console.log(JSON.parse(window.localStorage.getItem(this.props.loggedInUserId)));\n    }\n\n    handleMsgRequest = () => {\n        this.setState({msgRequest: true});\n    }\n\n    handleConfirm = () => {\n\n    }\n\n    onLoadRecaptcha() {\n        if (this.captchaDemo) {\n            this.captchaDemo.reset();\n        }\n    }\n    verifyCallback(recaptchaToken) {\n      if(recaptchaToken) {\n        this.setState({buttonDisabled: false});\n      }\n    }\n\n    proceedToMsg = () => {\n        console.log(\"SUBMITTED!\");\n        this.setState({msgRequest: false});\n    }\n\n    descriptDiv = () => {\n        return (\n            <div>\n                <h3>{subcategory}</h3>\n                {categ !== 'kids' && <p><b>Velikost: </b>{selection.clothsize.label}</p>}\n                <p><b>Material: </b>{selection.material.label}</p>\n                <p><b>Stanje: </b>{selection.condition.label}</p>\n                <p><b>Znamka: </b>{selection.brand.value}</p>\n                <p><b>Opis: </b>{selection.descrtext.value}</p>\n                <br/>\n                <p><b>Cena: </b>{selection.price.value} €</p>\n                {(this.props.status === 'active' && this.props.loggedInUserId !== '0') && <button className = 'btnb' onClick = {this.addToCart}>DODAJ V KOŠARICO</button>}\n                <p style = {{fontWeight: 'bold'}}>{this.state.addingResult}</p>\n                <br/>\n                <p>Prodajalec: {this.props.seller} </p>\n                <NavLink className='btnu' exact to={'/sellerlistings?' + this.props.sellerId}>Vsi oglasi tega prodajalca</NavLink>\n                {(this.props.loggedInUserId !== '0' && this.props.loggedInUserId !== this.props.sellerId) && <p style = {{fontSize: 10}}>\n                <button style = {btnContStyle} onClick = {this.handleMsgRequest}>Kontaktiraj prodajalca</button></p>}\n            </div>\n        )\n    }\n\n    render() {\n\n        const selection = this.props.selection;\n        let subcategory = '';\n        const categ = selection.category.value;\n\n        switch(categ) {\n            case 'women':\n                subcategory = selection.women.label;\n                break;\n            case 'men':\n                subcategory = selection.men.label;\n                break;\n            case 'kids':\n                subcategory = selection.kids.label;\n                break;\n            default:\n                subcategory = '';\n                break;\n        }\n\n        const btnContStyle = {\n            backgroundColor: 'rgb(255,255,255,0)',\n            border: 'none',\n            margin: 0,\n            padding: 0,\n            fontSize: 'small',\n            textDecoration: 'underline',\n            color: 'grey',\n            cursor: 'pointer'\n        }\n\n        if(!this.state.msgRequest) {\n            return(\n                <div className=\"description\">\n                    {this.descriptDiv()}\n                </div>\n            )\n        }\n        else return (\n            <div className=\"description\">\n                <Popup open = {true}\n                    position = 'center center'\n                    onClose={this.closeModal}>\n                    <div style = {{display: 'flex', justifyContent: 'center', height: '90px', lineHeight: '90px'}}>\n                        <ReCaptcha\n                            ref={(el) => {this.captchaDemo = el;}}\n                            size=\"normal\"\n                            data-theme=\"dark\"            \n                            render=\"explicit\"\n                            sitekey=\"6LcVy-0UAAAAAA1SYgeXX6tUze_gLa6Tplcris-V\"\n                            onloadCallback={this.onLoadRecaptcha}\n                            verifyCallback={this.verifyCallback}\n                        />\n                        {this.state.buttonDisabled && <span style = {{paddingLeft: '20px'}}>NADALJUJ</span>}\n                        {!this.state.buttonDisabled && <NavLink style = {{paddingLeft: '20px'}} onClick ={this.proceedToMsg} exact to = {'/chatpage/conversation?' + this.props.sellerId}>NADALJUJ</NavLink>}\n                    </div>\n                </Popup>\n                {this.descriptDiv()}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n      loggedInUser: state.loggedInUser,\n      loggedInUserId: state.loggedInUserId\n    };\n};\n\nconst mapDispatchToProps = {\n    saveAtt: saveAtt,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (ItemDescription);"]},"metadata":{},"sourceType":"module"}